"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[742],{5519:(O,U,r)=>{r.d(U,{r:()=>p});class p{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0}}},9345:(O,U,r)=>{r.r(U),r.d(U,{UserModule:()=>Dt});var p=r(9808),d=r(2554),Z=r(319),c=r(3075),q=r(2340),f=r(1490),e=r(5e3),h=r(1584),A=r(2290),Q=r(690),v=r(6107),x=r(226),k=r(7322),R=r(4107),y=r(508),P=r(2368),T=r(9785),N=r(9224),S=r(1062);function j(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADD_USER")))}function H(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"EDIT_USER")))}function $(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function G(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,$,3,3,"div",39),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("firstName").errors?null:s.userForm.get("firstName").errors.required)}}function B(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME_IS_REQUIRED")," "))}function V(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,B,3,3,"div",39),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("lastName").errors?null:s.userForm.get("lastName").errors.required)}}function W(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_IS_REQUIRED")," "))}function z(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,W,3,3,"div",39),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("phoneNumber").errors?null:s.userForm.get("phoneNumber").errors.required)}}function K(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL_IS_REQUIRED")," "))}function X(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function ee(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,K,3,3,"div",39),e.YNc(2,X,3,3,"div",39),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.email)}}function te(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function se(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_6_DIGIT")," "))}function ne(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,te,3,3,"div",39),e.YNc(2,se,3,3,"div",39),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.minlength)}}function ie(t,i){if(1&t&&(e.TgZ(0,"div",9)(1,"div",10)(2,"label",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",40),e.YNc(6,ne,3,2,"div",4),e.qZA()()),2&t){const s=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,2,"PASSWORD")," *"),e.xp6(3),e.Q6J("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").errors)}}function oe(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function re(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,oe,3,3,"div",39),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("confirmPassword").errors?null:s.userForm.get("confirmPassword").errors.required)}}function ae(t,i){1&t&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function ce(t,i){if(1&t&&(e.TgZ(0,"div",9)(1,"div",10)(2,"label",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",41),e.YNc(6,re,2,1,"div",4),e.YNc(7,ae,3,3,"div",39),e.qZA()()),2&t){const s=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,3,"CONFIRM_PASSWORD")," *"),e.xp6(3),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function le(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.selectedRoles[0].name," ")}}function ue(t,i){if(1&t&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.AsE(" (+",s.selectedRoles.length-1," ",2===s.selectedRoles.length?"other":"others",") ")}}function me(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s.name)}}function de(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTIVE")))}function pe(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"INACTIVE")))}function ge(t,i){if(1&t&&e._UZ(0,"img",44),2&t){const s=e.oxw();e.Q6J("src",s.imgSrc,e.LSH)}}function _e(t,i){1&t&&e._UZ(0,"img",45)}function fe(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(s),e.oxw();const o=e.MAs(72);return e.KtG(o.click())}),e._UZ(1,"i",47),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ADD_PROFILE"),""))}function he(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(s),e.oxw();const o=e.MAs(72);return e.KtG(o.click())}),e._UZ(1,"i",47),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"CHANGE_PROFILE"),""))}function ve(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.onRemoveImage())}),e._UZ(1,"i",50),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"REMOVE_PROFILE")," "))}function Ue(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(s);const o=e.oxw(2);return e.KtG(o.saveUser())}),e._UZ(1,"i",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function Ze(t,i){1&t&&(e.ynx(0),e.YNc(1,Ue,4,3,"button",51),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","USR_UPDATE_USER"))}function Ae(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(s);const o=e.oxw(2);return e.KtG(o.saveUser())}),e._UZ(1,"i",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function xe(t,i){1&t&&(e.ynx(0),e.YNc(1,Ae,4,3,"button",51),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","USR_ADD_USER"))}const Te=function(){return["/users"]};let w=(()=>{class t extends f.H{constructor(s,n,o,a,l,m,g){super(g),this.fb=s,this.router=n,this.activeRoute=o,this.userService=a,this.toastrService=l,this.commonService=m,this.translationService=g,this.isEditMode=!1,this.selectedRoles=[],this.isImageUpdate=!1,this.getLangDir()}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user,this.user.profilePhoto&&(this.imgSrc=q.N.apiUrl+this.user.profilePhoto)):(this.userForm.get("password").setValidators([c.kI.required,c.kI.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.kI.required]))}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email]],phoneNumber:["",[c.kI.required]],password:[""],confirmPassword:[""],address:[""],isActive:[!0]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}onFileSelect(s){const n=s.target.files[0];if(!n||null==n.type.match(/image\/*/))return;const a=new FileReader;a.readAsDataURL(n),a.onload=l=>{this.imgSrc=a.result,this.isImageUpdate=!0,s.target.value=""}}onRemoveImage(){this.isImageUpdate=!0,this.imgSrc=""}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.userForm.markAllAsTouched()}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,isActive:this.userForm.get("isActive").value,address:this.userForm.get("address").value,userRoles:this.getSelectedRoles(),isImageUpdate:this.isImageUpdate,imgSrc:this.imgSrc}}getSelectedRoles(){return this.selectedRoles.map(s=>({userId:this.userForm.get("id").value,roleId:s.id}))}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(s=>{if(this.roleList=s,this.isEditMode){const n=this.user.userRoles.map(o=>o.roleId);this.selectedRoles=this.roleList.filter(o=>n.indexOf(o.id)>-1)}})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(c.QS),e.Y36(d.F0),e.Y36(d.gz),e.Y36(h.K),e.Y36(A._W),e.Y36(Q.v),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],features:[e.qOj],decls:86,vars:52,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-9"],[1,"form-row"],[1,"col-md-6"],[1,"form-group"],[1,"text-danger"],["formControlName","firstName","type","text",1,"form-control"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","number",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-group","col-md-9"],[3,"dir"],["multiple","",1,"form-control",3,"dir","value","valueChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-md-3","status-switch","mt-8"],["formControlName","isActive",3,"dir"],[1,"col-md-12"],["formControlName","address",1,"form-control"],[1,"col-md-3"],[1,"col-md-12","text-center"],[1,"cus-mat-card",3,"dir"],["hidden","","name","logo","type","file","name","Profile Photo","fxFlex","30",3,"change"],["fileInput",""],["class","full-width",3,"src",4,"ngIf"],["class","full-width","src","../../../assets/images/user-profile.jpg",4,"ngIf"],["type","button","class","btn btn-success btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btn-success btn-sm mb-2",3,"click",4,"ngIf"],["type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],[1,"m-top-10","col-md-12"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],["class","text-danger",4,"ngIf"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[1,"example-additional-selection"],[3,"value"],[1,"full-width",3,"src"],["src","../../../assets/images/user-profile.jpg",1,"full-width"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"far","fa-image"],["type","button",1,"btn","btn-success","btn-sm","mb-2",3,"click"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,j,3,3,"h1",4),e.YNc(5,H,3,3,"h1",4),e.qZA()()()(),e.TgZ(6,"form",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",12),e.YNc(18,G,2,1,"div",4),e.qZA()(),e.TgZ(19,"div",9)(20,"div",10)(21,"label",11),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",13),e.YNc(25,V,2,1,"div",4),e.qZA()()()(),e.TgZ(26,"div",9)(27,"div",10)(28,"label",11),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,z,2,1,"div",4),e.qZA()(),e.TgZ(33,"div",9)(34,"div",10)(35,"label",11),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._UZ(38,"input",15),e.YNc(39,ee,3,2,"div",4),e.qZA()(),e.TgZ(40,"div",9)(41,"div",8),e.YNc(42,ie,7,4,"div",16),e.YNc(43,ce,8,5,"div",16),e.qZA()(),e.TgZ(44,"div",9)(45,"div",8)(46,"div",17)(47,"mat-label",18),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"mat-select",19),e.NdJ("valueChange",function(a){return n.selectedRoles=a}),e.TgZ(51,"mat-select-trigger",18),e.YNc(52,le,2,1,"span",4),e.YNc(53,ue,2,2,"span",20),e.qZA(),e.YNc(54,me,2,2,"mat-option",21),e.qZA()(),e.TgZ(55,"div",22)(56,"mat-slide-toggle",23),e.YNc(57,de,3,3,"span",4),e.YNc(58,pe,3,3,"span",4),e.qZA()()()(),e.TgZ(59,"div",24)(60,"div",6)(61,"div",9)(62,"div",10)(63,"label"),e._uU(64),e.ALo(65,"translate"),e.qZA(),e._UZ(66,"textarea",25),e.qZA()()()()()(),e.TgZ(67,"div",26)(68,"div",6)(69,"div",27)(70,"mat-card",28)(71,"input",29,30),e.NdJ("change",function(a){return n.onFileSelect(a)}),e.qZA(),e.YNc(73,ge,1,1,"img",31),e.YNc(74,_e,1,0,"img",32),e.TgZ(75,"mat-card-actions",18),e.YNc(76,fe,4,3,"button",33),e.YNc(77,he,4,3,"button",34),e.YNc(78,ve,4,3,"button",35),e.qZA()()()()(),e.TgZ(79,"div",36),e.YNc(80,Ze,2,1,"ng-container",4),e.YNc(81,xe,2,1,"ng-container",4),e.TgZ(82,"button",37),e._UZ(83,"i",38),e._uU(84),e.ALo(85,"translate"),e.qZA()()()()),2&s&&(e.xp6(4),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("formGroup",n.userForm),e.xp6(9),e.hij("",e.lcZ(16,37,"FIRST_NAME"),"*"),e.xp6(3),e.Q6J("ngIf",n.userForm.get("firstName").touched&&n.userForm.get("firstName").errors),e.xp6(4),e.hij("",e.lcZ(23,39,"LAST_NAME"),"*"),e.xp6(3),e.Q6J("ngIf",n.userForm.get("lastName").touched&&n.userForm.get("lastName").errors),e.xp6(4),e.hij("",e.lcZ(30,41,"MOBILE_NUMBER")," *"),e.xp6(3),e.Q6J("ngIf",n.userForm.get("phoneNumber").touched&&n.userForm.get("phoneNumber").errors),e.xp6(4),e.hij("",e.lcZ(37,43,"EMAIL")," *"),e.xp6(2),e.uIk("disabled",n.isEditMode?"":null),e.xp6(1),e.Q6J("ngIf",n.userForm.get("email").touched&&n.userForm.get("email").errors),e.xp6(3),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(4),e.Q6J("dir",n.langDir),e.xp6(1),e.Oqu(e.lcZ(49,45,"ROLES")),e.xp6(2),e.Q6J("dir",n.langDir)("value",n.selectedRoles),e.xp6(1),e.Q6J("dir",n.langDir),e.xp6(1),e.Q6J("ngIf",n.selectedRoles.length>0),e.xp6(1),e.Q6J("ngIf",n.selectedRoles.length>1),e.xp6(1),e.Q6J("ngForOf",n.roleList),e.xp6(2),e.Q6J("dir",n.langDir),e.xp6(1),e.Q6J("ngIf",n.userForm.get("isActive").value),e.xp6(1),e.Q6J("ngIf",!n.userForm.get("isActive").value),e.xp6(6),e.Oqu(e.lcZ(65,47,"ADDRESS")),e.xp6(6),e.Q6J("dir",n.langDir),e.xp6(3),e.Q6J("ngIf",n.imgSrc),e.xp6(1),e.Q6J("ngIf",!n.imgSrc),e.xp6(1),e.Q6J("dir",n.langDir),e.xp6(1),e.Q6J("ngIf",!n.imgSrc),e.xp6(1),e.Q6J("ngIf",n.imgSrc),e.xp6(1),e.Q6J("ngIf",n.imgSrc),e.xp6(2),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("routerLink",e.DdM(51,Te)),e.xp6(2),e.hij(" ",e.lcZ(85,49,"CANCEL"),""))},dependencies:[p.sg,p.O5,d.rH,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,x.Lv,k.hX,R.gD,R.$L,y.ey,P.Rr,T.d,N.a8,N.hq,S.X$],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}.btn-control-center[_ngcontent-%COMP%]{margin-top:21px}.mt-8[_ngcontent-%COMP%]{margin-top:8px}"]}),t})(),I=(()=>{class t{constructor(s){this.userService=s}resolve(s,n){const o=s.paramMap.get("id");return this.userService.getUser(o)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(h.K))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var E=r(6087),C=r(4847),Se=r(8527),Ce=r(6787),be=r(3753),F=r(2868),Re=r(13),Ne=r(5778),_=r(2349);function Ie(t,i){1&t&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function Ee(t,i){1&t&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_6_DIGIT")," "))}function Le(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Ie,3,3,"div",13),e.YNc(2,Ee,3,3,"div",13),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.minlength)}}function Pe(t,i){1&t&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function we(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Pe,3,3,"div",13),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("confirmPassword").errors?null:s.resetPasswordForm.get("confirmPassword").errors.required)}}function Fe(t,i){1&t&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function De(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.resetPassword())}),e._UZ(1,"i",19),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}let Me=(()=>{class t extends f.H{constructor(s,n,o,a,l,m){super(m),this.userService=s,this.fb=n,this.dialogRef=o,this.data=a,this.toastrService=l,this.translationService=m,this.getLangDir()}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.email)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[],password:["",[c.kI.required,c.kI.minLength(6)]],confirmPassword:["",[c.kI.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid&&(this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}))}createBuildObject(){return{email:"",password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(h.K),e.Y36(c.QS),e.Y36(_.so),e.Y36(_.WI),e.Y36(A._W),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],features:[e.qOj],decls:35,vars:24,consts:[[1,"close-btn-modal",3,"click"],[1,"fa","fa-times"],[1,"container"],["mat-dialog-title","",3,"dir"],["mat-dialog-content","",3,"dir"],[3,"formGroup"],[1,"col-md-12"],[1,"form-group"],["formControlName","email","type","email",1,"form-control"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions","",3,"dir"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-times-circle"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.onNoClick()}),e._UZ(1,"i",1),e.qZA(),e.TgZ(2,"div",2)(3,"h1",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"div",7)(10,"label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",8),e.qZA()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label",9),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",10),e.YNc(20,Le,3,2,"div",11),e.qZA()(),e.TgZ(21,"div",6)(22,"div",7)(23,"label",9),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",12),e.YNc(27,we,2,1,"div",11),e.YNc(28,Fe,3,3,"div",13),e.qZA()()()(),e.TgZ(29,"div",14),e.YNc(30,De,4,3,"button",15),e.TgZ(31,"button",16),e.NdJ("click",function(){return n.onNoClick()}),e._UZ(32,"i",17),e._uU(33),e.ALo(34,"translate"),e.qZA()()()),2&s&&(e.xp6(3),e.Q6J("dir",n.langDir),e.xp6(1),e.Oqu(e.lcZ(5,14,"RESET_PASSWORD")),e.xp6(2),e.Q6J("dir",n.langDir),e.xp6(1),e.Q6J("formGroup",n.resetPasswordForm),e.xp6(4),e.Oqu(e.lcZ(12,16,"EMAIL")),e.xp6(2),e.uIk("disabled",!0),e.xp6(4),e.hij("",e.lcZ(18,18,"PASSWORD")," *"),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("password").touched&&n.resetPasswordForm.get("password").errors),e.xp6(4),e.hij("",e.lcZ(25,20,"CONFIRM_PASSWORD")," *"),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.hasError("notSame")),e.xp6(1),e.Q6J("dir",n.langDir),e.xp6(1),e.Q6J("hasClaim","USR_RESET_PWD"),e.xp6(3),e.hij(" ",e.lcZ(34,22,"CANCEL"),""))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,x.Lv,_.uh,_.xY,_.H8,T.d,S.X$]}),t})();var L=r(591),Ye=r(2654),Je=r(1086),Oe=r(7221),qe=r(537);class Qe{constructor(i){this.userService=i,this.userSubject=new L.X([]),this.responseHeaderSubject=new L.X(null),this.loadingSubject=new L.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable(),this.sub$=new Ye.w}get count(){return this._count}connect(){return this.userSubject.asObservable()}disconnect(){this.userSubject.complete(),this.loadingSubject.complete(),this.sub$.unsubscribe()}loadUsers(i){this.loadingSubject.next(!0),this.sub$=this.userService.getUsers(i).pipe((0,Oe.K)(()=>(0,Je.of)([])),(0,qe.x)(()=>this.loadingSubject.next(!1))).subscribe(s=>{const n=JSON.parse(s.headers.get("X-Pagination"));this.responseHeaderSubject.next(n);const o=[...s.body];this._count=o.length,this.userSubject.next(o)})}}var ke=r(5485),u=r(2075),D=r(773),b=r(2181),M=r(7423),Y=r(5245);const ye=["input"],je=function(){return["/users/manage"]};function He(t,i){1&t&&(e.TgZ(0,"button",33),e._UZ(1,"i",34),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&t&&(e.Q6J("routerLink",e.DdM(4,je)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ADD_USER")," "))}function $e(t,i){1&t&&(e.TgZ(0,"div",35),e._UZ(1,"mat-spinner"),e.qZA())}function Ge(t,i){1&t&&(e.TgZ(0,"th",36)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ACTION")," "))}function Be(t,i){if(1&t&&(e.TgZ(0,"button",42)(1,"mat-icon"),e._uU(2,"more_vert"),e.qZA()()),2&t){e.oxw();const s=e.MAs(3);e.Q6J("matMenuTriggerFor",s)}}function Ve(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editUser(o.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"EDIT")))}function We(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.userPermission(o.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"admin_panel_settings"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"PERMISSION")))}function ze(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.resetPassword(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"vpn_key"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"RESET_PASSWORD")))}function Ke(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.deleteUser(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"DELETE")))}const Xe=function(){return["USR_UPDATE_USER","USR_ASSIGN_USR_PERMISSIONS","USR_RESET_PWD","USR_DELETE_USER"]};function et(t,i){if(1&t&&(e.TgZ(0,"td",37),e.YNc(1,Be,3,1,"button",38),e.TgZ(2,"mat-menu",39,40),e.YNc(4,Ve,6,3,"button",41),e.YNc(5,We,6,3,"button",41),e.YNc(6,ze,6,3,"button",41),e.YNc(7,Ke,6,3,"button",41),e.qZA()()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("hasClaim",e.DdM(6,Xe)),e.xp6(1),e.Q6J("dir",s.langDir),e.xp6(2),e.Q6J("hasClaim","USR_UPDATE_USER"),e.xp6(1),e.Q6J("hasClaim","USR_ASSIGN_USR_PERMISSIONS"),e.xp6(1),e.Q6J("hasClaim","USR_RESET_PWD"),e.xp6(1),e.Q6J("hasClaim","USR_DELETE_USER")}}function tt(t,i){1&t&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL")," "))}function st(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"a",47),e._uU(2),e.qZA(),e.BQk()),2&t){const s=e.oxw().$implicit;e.xp6(1),e.MGl("href","mailto:",s.email,"",e.LSH),e.xp6(1),e.Oqu(s.email)}}function nt(t,i){if(1&t&&(e.TgZ(0,"td",45),e.YNc(1,st,3,2,"ng-container",46),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.Q6J("ngIf",s.email)}}function it(t,i){1&t&&(e.TgZ(0,"th",48),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME")," "))}function ot(t,i){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.firstName," ")}}function rt(t,i){1&t&&(e.TgZ(0,"th",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME")," "))}function at(t,i){if(1&t&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.lastName," ")}}function ct(t,i){1&t&&(e.TgZ(0,"th",48),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PHONE_NUMBER")," "))}function lt(t,i){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.phoneNumber," ")}}function ut(t,i){1&t&&(e.TgZ(0,"th",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"STATUS")," "))}function mt(t,i){1&t&&(e.TgZ(0,"span",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTIVE")))}function dt(t,i){1&t&&(e.TgZ(0,"span",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"INACTIVE")))}function pt(t,i){if(1&t&&(e.TgZ(0,"td",37),e.YNc(1,mt,3,3,"span",53),e.YNc(2,dt,3,3,"span",54),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.Q6J("ngIf",s.isActive),e.xp6(1),e.Q6J("ngIf",!s.isActive)}}const gt=function(){return[10,20,30]};function _t(t,i){if(1&t&&(e.TgZ(0,"td",57),e._UZ(1,"mat-paginator",58),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("dir",s.langDir)("length",s.userResource.totalCount)("pageSize",s.userResource.pageSize)("pageSizeOptions",e.DdM(4,gt))}}function ft(t,i){1&t&&(e.TgZ(0,"tr")(1,"td",59)(2,"span",60)(3,"b"),e._uU(4),e.ALo(5,"translate"),e.qZA()()()()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"NO_DATA_FOUND"),""))}function ht(t,i){1&t&&e._UZ(0,"tr",61)}function vt(t,i){1&t&&e._UZ(0,"tr",62)}function Ut(t,i){1&t&&e._UZ(0,"tr",63)}let Zt=(()=>{class t extends f.H{constructor(s,n,o,a,l,m){super(m),this.userService=s,this.toastrService=n,this.commonDialogService=o,this.dialog=a,this.router=l,this.translationService=m,this.users=[],this.displayedColumns=["action","email","firstName","lastName","phoneNumber","isActive"],this.footerToDisplayed=["footer"],this.isLoadingResults=!0,this.getLangDir(),this.userResource=new Se.q,this.userResource.pageSize=10,this.userResource.orderBy="email desc"}ngOnInit(){this.dataSource=new Qe(this.userService),this.dataSource.loadUsers(this.userResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,Ce.T)(this.sort.sortChange,this.paginator.page).pipe((0,F.b)(s=>{this.userResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.userResource.pageSize=this.paginator.pageSize,this.userResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadUsers(this.userResource)})).subscribe(),this.sub$.sink=(0,be.R)(this.input.nativeElement,"keyup").pipe((0,Re.b)(1e3),(0,Ne.x)(),(0,F.b)(()=>{this.paginator.pageIndex=0,this.userResource.name=this.input.nativeElement.value,this.dataSource.loadUsers(this.userResource)})).subscribe()}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${s.email}`).subscribe(n=>{n&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_DELETED_SUCCESSFULLY")),this.paginator.pageIndex=0,this.userResource.name=this.input.nativeElement.value,this.dataSource.loadUsers(this.userResource)}))})}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(s=>{s&&(this.userResource.pageSize=s.pageSize,this.userResource.skip=s.skip,this.userResource.totalCount=s.totalCount)})}resetPassword(s){this.dialog.open(Me,{width:"350px",direction:this.langDir,data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(h.K),e.Y36(A._W),e.Y36(ke.V),e.Y36(_.uw),e.Y36(d.F0),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],viewQuery:function(s,n){if(1&s&&(e.Gf(E.NW,5),e.Gf(C.YE,5),e.Gf(ye,5)),2&s){let o;e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first),e.iGM(o=e.CRH())&&(n.input=o.first)}},features:[e.qOj],decls:41,vars:15,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto","col"],[1,"content-header"],[1,"col-md-auto","col-sm-auto","col-auto"],["class","btn blue-btn btn-sm m-right-10",3,"routerLink",4,"hasClaim"],[1,"table-responsive"],["class","loading-shade",4,"ngIf"],[1,"col-sm-6","mb-3"],[1,"form-control",3,"placeholder"],["input",""],["mat-table","","matSort","","matSortActive","email",1,"table","table-bordered","table-hover",3,"dir","dataSource"],["matColumnDef","action"],["class","table-column-150","mat-header-cell","",4,"matHeaderCellDef"],["class","table-column-150","mat-cell","",4,"matCellDef"],["matColumnDef","email"],["class","table-column-300","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-300","mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["class","table-column-200","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-200","mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["class","table-column-175","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-175","mat-cell","",4,"matCellDef"],["matColumnDef","phoneNumber"],["matColumnDef","isActive"],["class","table-column-150","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","footer"],["mat-footer-cell","","colspan","6",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],[1,"btn","blue-btn","btn-sm","m-right-10",3,"routerLink"],[1,"fas","fa-plus"],[1,"loading-shade"],["mat-header-cell","",1,"table-column-150"],["mat-cell","",1,"table-column-150"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor",4,"hasClaim"],[3,"dir"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"hasClaim"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"table-column-300"],["mat-cell","",1,"table-column-300"],[4,"ngIf"],[3,"href"],["mat-header-cell","","mat-sort-header","",1,"table-column-200"],["mat-cell","",1,"table-column-200"],["mat-header-cell","","mat-sort-header","",1,"table-column-175"],["mat-cell","",1,"table-column-175"],["mat-header-cell","","mat-sort-header","",1,"table-column-150"],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-warning"],["mat-footer-cell","","colspan","6"],[3,"dir","length","pageSize","pageSizeOptions"],["colspan","9"],[1,"p-4","mt-4"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",4),e.YNc(8,He,4,5,"button",5),e.qZA()()(),e.TgZ(9,"div",6),e.YNc(10,$e,2,0,"div",7),e.ALo(11,"async"),e.TgZ(12,"div",8),e._UZ(13,"input",9,10),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"table",11),e.ynx(17,12),e.YNc(18,Ge,4,3,"th",13),e.YNc(19,et,8,7,"td",14),e.BQk(),e.ynx(20,15),e.YNc(21,tt,3,3,"th",16),e.YNc(22,nt,2,1,"td",17),e.BQk(),e.ynx(23,18),e.YNc(24,it,3,3,"th",19),e.YNc(25,ot,2,1,"td",20),e.BQk(),e.ynx(26,21),e.YNc(27,rt,3,3,"th",22),e.YNc(28,at,2,1,"td",23),e.BQk(),e.ynx(29,24),e.YNc(30,ct,3,3,"th",19),e.YNc(31,lt,2,1,"td",20),e.BQk(),e.ynx(32,25),e.YNc(33,ut,3,3,"th",26),e.YNc(34,pt,3,2,"td",14),e.BQk(),e.ynx(35,27),e.YNc(36,_t,2,5,"td",28),e.BQk(),e.YNc(37,ft,6,3,"tr",29),e.YNc(38,ht,1,0,"tr",30),e.YNc(39,vt,1,0,"tr",31),e.YNc(40,Ut,1,0,"tr",32),e.qZA()()),2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,9,"USERS")),e.xp6(3),e.Q6J("hasClaim","USR_ADD_USER"),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,11,n.dataSource.loading$)),e.xp6(3),e.s9C("placeholder",e.lcZ(15,13,"SEARCH_BY_EMAIL_FIRST_NAME_LAST_NAME_PHONE_NUMBER")),e.xp6(3),e.Q6J("dir",n.langDir)("dataSource",n.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("matFooterRowDef",n.footerToDisplayed))},dependencies:[p.O5,d.rH,x.Lv,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.mD,u.Ke,u.ge,u.ev,u.yh,u.XQ,u.Gk,u.Q2,u.Ee,D.Ou,T.d,b.VK,b.OP,b.p6,M.lW,E.NW,C.YE,C.nU,Y.Hw,p.Ov,S.X$],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]}),t})();var At=r(567),xt=r(8853),Tt=r(2852),J=r(7446);function St(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",20)(1,"mat-checkbox",21),e.NdJ("change",function(o){const l=e.CHM(s).$implicit,m=e.oxw().$implicit,g=e.oxw();return e.KtG(g.onPermissionChange(o,m,l))}),e._uU(2),e.qZA()()}if(2&t){const s=i.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("dir",n.langDir)("checked",n.checkPermission(s.id)),e.xp6(1),e.hij(" ",s.name," ")}}function Ct(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"mat-checkbox",17),e.NdJ("change",function(o){const l=e.CHM(s).$implicit,m=e.oxw();return e.KtG(m.onPageSelect(o,l))}),e.TgZ(3,"b"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",18),e.YNc(6,St,3,3,"div",19),e.qZA()()}if(2&t){const s=i.$implicit,n=e.oxw();e.xp6(2),e.Q6J("dir",n.langDir),e.xp6(2),e.hij(" ",s.name,""),e.xp6(2),e.Q6J("ngForOf",s.pageActions)}}function bt(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.saveUserClaim())}),e._UZ(1,"i",23),e._uU(2," Save"),e.qZA()}}const Rt=function(){return["/users"]};let Nt=(()=>{class t extends f.H{constructor(s){super(s),this.translationService=s,this.manageUserClaimAction=new e.vpe,this.step=0,this.getLangDir()}ngOnInit(){}checkPermission(s){return!!this.user.userClaims.find(o=>o.actionId===s)}onPermissionChange(s,n,o){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:o.code,claimValue:"",actionId:o.id});else{const a=this.user.userClaims.find(m=>m.actionId===o.id),l=this.user.userClaims.indexOf(a,0);l>-1&&this.user.userClaims.splice(l,1)}}onPageSelect(s,n){var o;if(s.checked)n.pageActions.forEach(l=>{this.checkPermission(l.id)||this.user.userClaims.push({userId:this.user.id,claimType:l.code,claimValue:"",actionId:l.id})});else{var a=null===(o=n.pageActions)||void 0===o?void 0:o.map(l=>l.id);this.user.userClaims=this.user.userClaims.filter(l=>a.indexOf(l.actionId)<0)}}saveUserClaim(){this.manageUserClaimAction.emit(this.user)}selecetAll(s){s.checked?this.pages.forEach(n=>{n.pageActions.forEach(o=>{this.checkPermission(o.id)||this.user.userClaims.push({userId:this.user.id,claimType:o.code,claimValue:"",actionId:o.id})})}):this.user.userClaims=[]}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission-presentation"]],inputs:{pages:"pages",user:"user"},outputs:{manageUserClaimAction:"manageUserClaimAction"},features:[e.qOj],decls:25,vars:13,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[1,"text-info"],[1,"row","align-items-center"],[1,"col-sm-12"],[1,"widget-title"],["color","primary",1,"example-margin",3,"dir","change"],[1,"row"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"row","mt-2"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],["color","primary",3,"dir","change"],[1,"row","ml-2"],["class","col-sm-3",4,"ngFor","ngForOf"],[1,"col-sm-3"],["color","primary",3,"dir","checked","change"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"span",4),e._uU(8),e.qZA()()()()()(),e.TgZ(9,"div",5)(10,"div",6)(11,"h4",7),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-checkbox",8),e.NdJ("change",function(a){return n.selecetAll(a)}),e._uU(15,"Select All"),e.qZA()()(),e.TgZ(16,"div",9)(17,"div",6),e.YNc(18,Ct,7,3,"div",10),e.qZA()(),e.TgZ(19,"div",11)(20,"div",6),e.YNc(21,bt,3,0,"button",12),e.TgZ(22,"a",13),e._UZ(23,"i",14),e._uU(24," Cancel"),e.qZA()()()),2&s&&(e.xp6(5),e.hij(" ",e.lcZ(6,8,"USER_PAGE_PERMISSION_TO")," : "),e.xp6(3),e.AsE("",null==n.user?null:n.user.firstName," ",null==n.user?null:n.user.lastName,""),e.xp6(4),e.Oqu(e.lcZ(13,10,"PERMISSION")),e.xp6(2),e.Q6J("dir",n.langDir),e.xp6(4),e.Q6J("ngForOf",n.pages),e.xp6(3),e.Q6J("hasClaim","USR_ASSIGN_USR_PERMISSIONS"),e.xp6(1),e.Q6J("routerLink",e.DdM(12,Rt)))},dependencies:[p.sg,d.yS,x.Lv,T.d,J.oG,S.X$]}),t})();const Et=[{path:"",component:Zt,data:{claimType:"USR_VIEW_USERS"},canActivate:[Z.a]},{path:"manage/:id",component:w,resolve:{user:I},data:{claimType:"USR_UPDATE_USER"},canActivate:[Z.a]},{path:"manage",component:w,data:{claimType:"USR_ADD_USER"},canActivate:[Z.a]},{path:"permission/:id",component:(()=>{class t extends f.H{constructor(s,n,o,a,l,m,g){super(g),this.activeRoute=s,this.router=n,this.toastrService=o,this.pageService=a,this.actionService=l,this.userService=m,this.translationService=g}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(o=>{this.user=o.user});const s=this.actionService.getAll(),n=this.pageService.getAll();(0,At.D)({getActionRequest:s,getPageRequest:n}).subscribe(o=>{this.pages=o.getPageRequest,this.pages=this.pages.map(a=>{const l=o.getActionRequest.filter(g=>g.pageId==a.id);return Object.assign({},a,{pageActions:l})})})}manageUserClaimAction(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(A._W),e.Y36(xt.P),e.Y36(Tt.c),e.Y36(h.K),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"pages","user","manageUserClaimAction"]],template:function(s,n){1&s&&(e.TgZ(0,"app-user-permission-presentation",0),e.NdJ("manageUserClaimAction",function(a){return n.manageUserClaimAction(a)}),e.qZA()),2&s&&e.Q6J("pages",n.pages)("user",n.user)},dependencies:[Nt]}),t})(),resolve:{user:I},data:{claimType:"USR_ASSIGN_USR_PERMISSIONS"},canActivate:[Z.a]}];let Lt=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(Et),d.Bz]}),t})();var Pt=r(7108),wt=r(7531),Ft=r(1125);let Dt=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[I],imports:[p.ez,Lt,c.u5,c.UX,u.p0,D.Cq,_.Is,R.LD,P.rP,Pt.m,b.Tx,M.ot,N.QW,E.TU,C.JX,wt.c,Y.Ps,Ft.To,J.p9]}),t})()}}]);