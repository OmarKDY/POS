"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[4422],{5519:(v,d,r)=>{r.d(d,{r:()=>i});class i{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0}}},708:(v,d,r)=>{r.d(d,{e:()=>T});var i=r(5519),l=r(2);class T extends i.r{constructor(){super(...arguments),this.orderNumber="",this.customerName="",this.customerId="",this.isSalesOrderRequest=!1,this.status=l.q.All}}},2:(v,d,r)=>{r.d(d,{q:()=>i});var i=(()=>{return(l=i||(i={}))[l.Not_Return=0]="Not_Return",l[l.Return=1]="Return",l[l.All=2]="All",i;var l})()},4422:(v,d,r)=>{r.r(d),r.d(d,{ProfitLossReportModule:()=>z});var i=r(9808),l=r(2554),T=r(319),D=r(708),L=r(8287),S=r(8708),n=r(8017),Z=r(1490),c=r(574),t=r(5e3),U=r(5941),y=r(2290),E=r(6107),R=r(520);let x=(()=>{class s{constructor(o){this.http=o}getSaleOrderProfitLoss(o){const a=(new R.LE).set("fromDate",o.fromDate?o.fromDate.toDateString():"").set("toDate",o.toDate?o.toDate.toDateString():"");return this.http.get("salesOrder/items/profitLoss",{params:a})}getPurchaseProfitLoss(o){const a=(new R.LE).set("fromDate",o.fromDate?o.fromDate.toDateString():"").set("toDate",o.toDate?o.toDate.toDateString():"");return this.http.get("purchaseorder/items/profitLoss",{params:a})}}return s.\u0275fac=function(o){return new(o||s)(t.LFG(R.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var p=r(3075),g=r(1122),b=r(1062);function F(s,h){1&s&&(t.TgZ(0,"div",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE_RANGE_VALIDATION_MSG")," "))}function M(s,h){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,F,3,3,"div",41),t.qZA()),2&s){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.searchForm.errors?null:o.searchForm.errors.dateRange)}}const N=[{path:"",component:(()=>{class s extends Z.H{constructor(o,e,a,u,f,m,P){super(a),this.expenseService=o,this.toastrService=e,this.translationService=a,this.profitLossReportService=u,this.fb=f,this.utcToLocalTime=m,this.customCurrencyPipe=P,this.totalAmount=0,this.currentDate=new Date,this.getLangDir(),this.saleOrderResource=new D.e,this.saleOrderResource.pageSize=15,this.saleOrderResource.orderBy="createdDate asc"}ngOnInit(){this.createSearchFormGroup(),this.searchForm.get("fromDate").setValue(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()-30)),this.searchForm.get("toDate").setValue(this.currentDate),this.saleOrderResource.fromDate=this.searchForm.get("fromDate").value,this.saleOrderResource.toDate=this.searchForm.get("toDate").value,this.getSaleOrderProfiteLoss(this.saleOrderResource),this.getPurchaseProfitLoss(this.saleOrderResource)}createSearchFormGroup(){this.searchForm=this.fb.group({fromDate:[""],toDate:[""]},{validators:(0,L.L)()})}onSearch(){this.searchForm.valid&&(this.saleOrderResource.fromDate=this.searchForm.get("fromDate").value,this.saleOrderResource.toDate=this.searchForm.get("toDate").value,this.getSaleOrderProfiteLoss(this.saleOrderResource),this.getPurchaseProfitLoss(this.saleOrderResource))}onClear(){this.searchForm.reset(),this.saleOrderResource.fromDate=this.searchForm.get("fromDate").value,this.saleOrderResource.toDate=this.searchForm.get("toDate").value,this.getSaleOrderProfiteLoss(this.saleOrderResource)}getSaleOrderProfiteLoss(o){this.profitLossReportService.getSaleOrderProfitLoss(o).subscribe(e=>{e&&(this.saleOrderProfitLoss=e)})}getPurchaseProfitLoss(o){this.profitLossReportService.getPurchaseProfitLoss(o).subscribe(e=>{e&&(this.purchaseOrderProfitLoss=e)})}onDownloadReport(){var o,e,a,u,f,m,P;let _=[[this.translationService.getValue("TOTAL_PURCHASE"),this.translationService.getValue("TOTAL_PURCHASE_TAX"),this.translationService.getValue("TOTAL_DISCOUNT_ON_PURCHASE"),this.translationService.getValue("PAID_PAYMENT"),this.translationService.getValue("PURCHASE_DUE"),this.translationService.getValue("GROSS_TOTAL")]],A=[];A.push({"Total Purchase":this.customCurrencyPipe.transform((null===(o=this.purchaseOrderProfitLoss)||void 0===o?void 0:o.total)-(null===(e=this.purchaseOrderProfitLoss)||void 0===e?void 0:e.totalTax)+(null===(a=this.purchaseOrderProfitLoss)||void 0===a?void 0:a.totalDiscount)),"Total Purchase Tax":this.customCurrencyPipe.transform(this.purchaseOrderProfitLoss.totalTax),"Total Discount on Purchase":this.customCurrencyPipe.transform(null===(u=this.purchaseOrderProfitLoss)||void 0===u?void 0:u.totalDiscount),"Paid Payment":this.customCurrencyPipe.transform(this.purchaseOrderProfitLoss.paidPayment),"Purchase Due":this.customCurrencyPipe.transform((null===(f=this.purchaseOrderProfitLoss)||void 0===f?void 0:f.total)-(null===(m=this.purchaseOrderProfitLoss)||void 0===m?void 0:m.paidPayment)),"Gross Total":this.customCurrencyPipe.transform(null===(P=this.purchaseOrderProfitLoss)||void 0===P?void 0:P.total)});let O=c.P6.book_new();c.P6.sheet_add_aoa(O,_);let C=c.P6.sheet_add_json(O,A,{origin:"A2",skipHeader:!0});c.P6.book_append_sheet(O,C,this.translationService.getValue("PURCHASE_PROFIT_&LOSS_REPORT")),c.NC(O,this.translationService.getValue("PURCHASE_PROFIT_&LOSS_REPORT")+".xlsx")}onSaleDownloadReport(){var o,e,a,u,f,m,P;let _=[[this.translationService.getValue("TOTAL_SALES"),this.translationService.getValue("TOTAL_SALES_TAX"),this.translationService.getValue("TOTAL_DISCOUNT_ON_SALES"),this.translationService.getValue("PAID_PAYMENT"),this.translationService.getValue("SALES_DUE"),this.translationService.getValue("GROSS_TOTAL")]],A=[];A.push({"Total Sales":this.customCurrencyPipe.transform((null===(o=this.saleOrderProfitLoss)||void 0===o?void 0:o.total)-(null===(e=this.saleOrderProfitLoss)||void 0===e?void 0:e.totalTax)+(null===(a=this.saleOrderProfitLoss)||void 0===a?void 0:a.totalDiscount)),"Total Sales Tax":this.customCurrencyPipe.transform(this.saleOrderProfitLoss.totalTax),"Total Discount on Sales":this.customCurrencyPipe.transform(null===(u=this.saleOrderProfitLoss)||void 0===u?void 0:u.totalDiscount),"Paid Payment":this.customCurrencyPipe.transform(this.saleOrderProfitLoss.paidPayment),"Sales Due":this.customCurrencyPipe.transform((null===(f=this.saleOrderProfitLoss)||void 0===f?void 0:f.total)-(null===(m=this.saleOrderProfitLoss)||void 0===m?void 0:m.paidPayment)),"Gross Total":this.customCurrencyPipe.transform(null===(P=this.saleOrderProfitLoss)||void 0===P?void 0:P.total)});let O=c.P6.book_new();c.P6.sheet_add_aoa(O,_);let C=c.P6.sheet_add_json(O,A,{origin:"A2",skipHeader:!0});c.P6.book_append_sheet(O,C,this.translationService.getValue("SALES_PROFIT_&LOSS_REPORT")),c.NC(O,this.translationService.getValue("SALES_PROFIT_&LOSS_REPORT")+".xlsx")}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(U.$),t.Y36(y._W),t.Y36(E.D),t.Y36(x),t.Y36(p.QS),t.Y36(n.M),t.Y36(S.R))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-profit-loss-report"]],features:[t._Bn([n.M,S.R]),t.qOj],decls:144,vars:93,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto","col"],[1,"content-header"],[1,"row"],[1,"col-sm-12","mb-3"],[3,"formGroup"],[1,"col-md-3"],[1,"form-group"],["for","fromDate"],["id","fromDate","formControlName","fromDate",1,"form-control",3,"max","owlDateTimeTrigger","owlDateTime","placeholder"],[3,"pickerType"],["fromDate",""],["for","toDate"],["id","toDate","formControlName","toDate",1,"form-control",3,"max","owlDateTimeTrigger","owlDateTime","placeholder"],["toDate",""],[1,"col-md-4","report-tool-bar"],["type","submit",1,"btn","btn-primary","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"],["type","submit",1,"btn","btn-danger","btn-sm","m-right-10",3,"click"],[1,"fas","fa-eraser"],[1,"col-sm-12"],[4,"ngIf"],[1,"col-md-6"],[1,"box","box-info"],[1,"box-body","table-responsive","no-padding"],["id","report-data",1,"table","table-bordered","table-hover"],["colspan","2",1,"text-bold","text-primary"],[1,"header"],[1,"float-right"],["type","submit",1,"btn","btn-warning","btn-sm",3,"click"],[1,"fas","fa-download"],[1,"text-right","pur_total"],[1,"text-right"],[1,"text-right","text-success"],[1,"text-right","text-danger"],[1,"profite"],[1,"text-bold"],[1,"text-right","text-primary"],[1,"box-body","table-responsive"],[1,"table","table-bordered","table-hover"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA()()()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"form",6)(10,"div",4)(11,"div",7)(12,"div",8)(13,"label",9),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",10),t.ALo(17,"translate"),t._UZ(18,"owl-date-time",11,12),t.qZA()(),t.TgZ(20,"div",7)(21,"div",8)(22,"label",13),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",14),t.ALo(26,"translate"),t._UZ(27,"owl-date-time",11,15),t.qZA()(),t.TgZ(29,"div",16)(30,"button",17),t.NdJ("click",function(){return e.onSearch()}),t._UZ(31,"i",18),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"button",19),t.NdJ("click",function(){return e.onClear()}),t._UZ(35,"i",20),t._uU(36),t.ALo(37,"translate"),t.qZA()()(),t.TgZ(38,"div",4)(39,"div",21),t.YNc(40,M,2,1,"div",22),t.qZA()()()()(),t.TgZ(41,"div",4)(42,"div",23)(43,"div",24)(44,"div",25)(45,"table",26)(46,"tbody")(47,"tr")(48,"td",27)(49,"span",28),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",29)(53,"button",30),t.NdJ("click",function(){return e.onDownloadReport()}),t._UZ(54,"i",31),t._uU(55),t.ALo(56,"translate"),t.qZA()()()(),t.TgZ(57,"tr")(58,"td"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",32),t._uU(62),t.qZA()(),t.TgZ(63,"tr")(64,"td"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"td",33),t._uU(68),t.qZA()(),t.TgZ(69,"tr")(70,"td"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"td",33),t._uU(74),t.qZA()(),t.TgZ(75,"tr")(76,"td"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"td",34),t._uU(80),t.qZA()(),t.TgZ(81,"tr")(82,"td"),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"td",35),t._uU(86),t.qZA()(),t.TgZ(87,"tr",36)(88,"td",37),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"td",38),t._uU(92),t.qZA()()()()()()(),t.TgZ(93,"div",23)(94,"div",24)(95,"div",39)(96,"table",40)(97,"tbody")(98,"tr")(99,"td",27)(100,"span",28),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.TgZ(103,"div",29)(104,"button",30),t.NdJ("click",function(){return e.onSaleDownloadReport()}),t._UZ(105,"i",31),t._uU(106),t.ALo(107,"translate"),t.qZA()()()(),t.TgZ(108,"tr")(109,"td"),t._uU(110),t.ALo(111,"translate"),t.qZA(),t.TgZ(112,"td",33),t._uU(113),t.qZA()(),t.TgZ(114,"tr")(115,"td"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t.TgZ(118,"td",33),t._uU(119),t.qZA()(),t.TgZ(120,"tr")(121,"td"),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"td",33),t._uU(125),t.qZA()(),t.TgZ(126,"tr")(127,"td"),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"td",34),t._uU(131),t.qZA()(),t.TgZ(132,"tr")(133,"td"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t.TgZ(136,"td",35),t._uU(137),t.qZA()(),t.TgZ(138,"tr",36)(139,"td",37),t._uU(140),t.ALo(141,"translate"),t.qZA(),t.TgZ(142,"td",38),t._uU(143),t.qZA()()()()()()()()),2&o){const a=t.MAs(19),u=t.MAs(28);t.xp6(5),t.Oqu(t.lcZ(6,47,"PROFIT_VS_LOSS_REPORT")),t.xp6(4),t.Q6J("formGroup",e.searchForm),t.xp6(5),t.hij("",t.lcZ(15,49,"FROM_DATE")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(17,51,"FROM_DATE")),t.Q6J("max",e.currentDate)("owlDateTimeTrigger",a)("owlDateTime",a),t.xp6(2),t.Q6J("pickerType","calendar"),t.xp6(5),t.hij("",t.lcZ(24,53,"TO_DATE")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(26,55,"TO_DATE")),t.Q6J("max",e.currentDate)("owlDateTimeTrigger",u)("owlDateTime",u),t.xp6(2),t.Q6J("pickerType","calendar"),t.xp6(5),t.hij(" ",t.lcZ(33,57,"SEARCH")," "),t.xp6(4),t.hij(" ",t.lcZ(37,59,"CLEAR")," "),t.xp6(4),t.Q6J("ngIf",e.searchForm.errors),t.xp6(10),t.Oqu(t.lcZ(51,61,"PURCHASE")),t.xp6(5),t.hij(" ",t.lcZ(56,63,"DOWNLOAD_REPORT")," "),t.xp6(4),t.AsE("",t.lcZ(60,65,"TOTAL_PURCHASE"),"(",null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.totalItem,")"),t.xp6(3),t.Oqu((null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.total)-(null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.totalTax)+(null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.totalDiscount)),t.xp6(3),t.Oqu(t.lcZ(66,67,"TOTAL_PURCHASE_TAX")),t.xp6(3),t.Oqu(null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.totalTax),t.xp6(3),t.Oqu(t.lcZ(72,69,"TOTAL_DISCOUNT_ON_PURCHASE")),t.xp6(3),t.hij("",null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.totalDiscount," "),t.xp6(3),t.Oqu(t.lcZ(78,71,"PAID_PAYMENT")),t.xp6(3),t.hij(" ",null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.paidPayment,""),t.xp6(3),t.Oqu(t.lcZ(84,73,"PURCHASE_DUE")),t.xp6(3),t.Oqu((null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.total)-(null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.paidPayment)),t.xp6(3),t.Oqu(t.lcZ(90,75,"GROSS_TOTAL")),t.xp6(3),t.Oqu(null==e.purchaseOrderProfitLoss?null:e.purchaseOrderProfitLoss.total),t.xp6(9),t.Oqu(t.lcZ(102,77,"SALES")),t.xp6(5),t.hij(" ",t.lcZ(107,79,"DOWNLOAD_REPORT")," "),t.xp6(4),t.AsE(" ",t.lcZ(111,81,"TOTAL_SALES"),"(",null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.totalItem,")"),t.xp6(3),t.Oqu((null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.total)-(null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.totalTax)+(null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.totalDiscount)),t.xp6(3),t.Oqu(t.lcZ(117,83,"TOTAL_SALES_TAX")),t.xp6(3),t.Oqu(null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.totalTax),t.xp6(3),t.Oqu(t.lcZ(123,85,"TOTAL_DISCOUNT_ON_SALES")),t.xp6(3),t.hij("",null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.totalDiscount," "),t.xp6(3),t.Oqu(t.lcZ(129,87,"PAID_PAYMENT")),t.xp6(3),t.hij(" ",null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.paidPayment,""),t.xp6(3),t.Oqu(t.lcZ(135,89,"SALES_DUE")),t.xp6(3),t.Oqu((null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.total)-(null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.paidPayment)),t.xp6(3),t.Oqu(t.lcZ(141,91,"GROSS_TOTAL")),t.xp6(3),t.Oqu(null==e.saleOrderProfitLoss?null:e.saleOrderProfitLoss.total)}},dependencies:[i.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,g.sZ,g.BO,g.hV,b.X$],styles:[".box.box-primary[_ngcontent-%COMP%]{border-top-color:1px solid #2095F3!important}.profite[_ngcontent-%COMP%]{background-color:#d2d6de}.text-bold[_ngcontent-%COMP%]{font-weight:700}.header[_ngcontent-%COMP%]{font-size:16px}"]}),s})(),data:{claimType:"REP_VIEW_PRO_LOSS_REP"},canActivate:[T.a]}];let I=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[l.Bz.forChild(N),l.Bz]}),s})();var q=r(7423),V=r(5245),j=r(773),Y=r(4847),J=r(2075),H=r(7108),B=r(2181),G=r(508),Q=r(7322),W=r(7531),X=r(4107),w=r(6087);let z=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[i.ez,I,p.u5,H.m,J.p0,Y.JX,V.Ps,q.ot,j.Cq,B.Tx,p.UX,g.Ll,g.x,G.XK,Q.lN,W.c,X.LD,w.TU]}),s})()},8708:(v,d,r)=>{r.d(d,{R:()=>D});var i=r(5e3),l=r(9808),T=r(130);let D=(()=>{class L{constructor(n,Z){this.currencyPipe=n,this.securityService=Z}transform(n,Z){return this.currencyPipe.transform(n=null!=n?n:0,this.securityService.currencyCode)}}return L.\u0275fac=function(n){return new(n||L)(i.Y36(l.H9,16),i.Y36(T.I,16))},L.\u0275pipe=i.Yjl({name:"customCurrency",type:L,pure:!0}),L})()}}]);