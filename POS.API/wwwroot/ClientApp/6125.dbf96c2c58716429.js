"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[6125],{5519:(P,y,a)=>{a.d(y,{r:()=>h});class h{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0}}},3081:(P,y,a)=>{a.r(y),a.d(y,{ReminderModule:()=>Wt});var h=a(9808),p=a(2554),C=a(6087),A=a(4847),W=a(4702),X=a(8929),ee=a(6787),te=a(13),ie=a(5778),ne=a(2868),M=a(1490),d=a(3075),_=(()=>{return(i=_||(_={}))[i.Daily=0]="Daily",i[i.Weekly=1]="Weekly",i[i.Monthly=2]="Monthly",i[i.Quarterly=3]="Quarterly",i[i.HalfYearly=4]="HalfYearly",i[i.Yearly=5]="Yearly",_;var i})(),u=(()=>{return(i=u||(u={}))[i.Sunday=0]="Sunday",i[i.Monday=1]="Monday",i[i.Tuesday=2]="Tuesday",i[i.Wednesday=3]="Wednesday",i[i.Thursday=4]="Thursday",i[i.Friday=5]="Friday",i[i.Saturday=6]="Saturday",u;var i})(),g=(()=>{return(i=g||(g={}))[i.Quarter1=0]="Quarter1",i[i.Quarter2=1]="Quarter2",i[i.Quarter3=2]="Quarter3",i[i.Quarter4=3]="Quarter4",g;var i})(),e=a(5e3),q=a(520),R=a(7221),re=a(8032);let D=(()=>{class i{constructor(t,n){this.httpClient=t,this.commonHttpErrorService=n}getReminders(t){const o=(new q.LE).set("Fields",t.fields?t.fields:"").set("OrderBy",t.orderBy?t.orderBy:"").set("PageSize",t.pageSize.toString()).set("Skip",t.skip.toString()).set("SearchQuery",t.searchQuery?t.searchQuery:"").set("subject",t.subject?t.subject:"").set("message",t.message?t.message:"").set("frequency",t.frequency?t.frequency:"");return this.httpClient.get("reminder/GetReminders",{params:o,observe:"response"})}addReminder(t){return this.httpClient.post("reminder",t).pipe((0,R.K)(this.commonHttpErrorService.handleError))}updateReminder(t){return this.httpClient.post(`reminder/${t.id}`,t).pipe((0,R.K)(this.commonHttpErrorService.handleError))}getReminder(t){return this.httpClient.get(`reminder/${t}`).pipe((0,R.K)(this.commonHttpErrorService.handleError))}deleteReminder(t){return this.httpClient.delete(`reminder/${t}`).pipe((0,R.K)(this.commonHttpErrorService.handleError))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(q.eN),e.LFG(re.U))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var U=a(690),Q=a(2290),Y=a(6107),T=a(1122),E=a(773),I=a(226),J=a(7446),x=a(4107),f=a(508),k=a(9785),F=a(9814),O=a(1062);function oe(i,r){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SUBJECT_IS_REQUIRED")," "))}function ae(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,oe,3,3,"div",28),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("subject").errors?null:t.reminderForm.get("subject").errors.required)}}function se(i,r){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE_IS_REQUIRED")," "))}function de(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,se,3,3,"div",28),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("message").errors?null:t.reminderForm.get("message").errors.required)}}function le(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" ",t.selectedUsers[0].firstName," ",t.selectedUsers[0].lastName," ")}}function ce(i,r){if(1&i&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" (+",t.selectedUsers.length-1," ",2===t.selectedUsers.length?"other":"others",") ")}}function me(i,r){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("dir",n.langDir)("value",t),e.xp6(1),e.AsE("",t.firstName," ",t.lastName,"")}}function ue(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function he(i,r){1&i&&(e.TgZ(0,"div")(1,"div",29),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"FREQUENCY_IS_REQUIRED")," "))}function ge(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",32)(2,"label",33),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",34),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFrequencyChange())}),e.TgZ(6,"option",35),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,ue,2,2,"option",36),e.qZA(),e.YNc(10,he,4,3,"div",10),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,4,"FREQUENCY")," *"),e.xp6(4),e.hij("--",e.lcZ(8,6,"NONE"),"--"),e.xp6(2),e.Q6J("ngForOf",t.reminderFrequencies),e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("frequency").errors?null:t.reminderForm.get("frequency").errors.required)}}function pe(i,r){if(1&i&&(e.TgZ(0,"div",44),e.ynx(1,45),e.TgZ(2,"mat-checkbox",46),e._uU(3),e.qZA(),e.BQk(),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.hij(" ",t.controls.name.value," ")}}function _e(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",41),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",42),e.YNc(5,pe,4,2,"div",43),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(3),e.Q6J("ngForOf",t.dailyRemindersArray.controls)}}function fe(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",51),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ve(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",48)(5,"mat-radio-group",49),e.YNc(6,fe,2,2,"mat-radio-button",50),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAY")),e.xp6(4),e.Q6J("ngForOf",t.dayOfWeek)}}function Re(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Te(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function be(i,r){1&i&&(e.TgZ(0,"div")(1,"div",29),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function ye(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,45),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",57),e.NdJ("change",function(){const s=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.onDateChange(s))}),e.YNc(6,Re,2,2,"option",36),e.qZA()(),e.TgZ(7,"td")(8,"select",58),e.NdJ("change",function(){const s=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.onDateChange(s))}),e.YNc(9,Te,2,2,"option",36),e.qZA(),e.YNc(10,be,4,3,"div",10),e.qZA(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.controls.name.value),e.xp6(3),e.Q6J("ngForOf",t.controls.monthValues.value),e.xp6(3),e.Q6J("ngForOf",o.days),e.xp6(1),e.Q6J("ngIf",t.get("day").touched&&t.hasError("invalidDate"))}}function Ae(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",53)(5,"table",54)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",55),e.YNc(16,ye,11,5,"tr",56),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_QUARTER_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"DAY")),e.xp6(3),e.Q6J("ngForOf",t.quarterlyRemindersArray.controls)}}function xe(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ze(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ce(i,r){1&i&&(e.TgZ(0,"div")(1,"div",29),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function De(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,45),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",57),e.NdJ("change",function(){const s=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.onDateChange(s))}),e.YNc(6,xe,2,2,"option",36),e.qZA()(),e.TgZ(7,"td")(8,"select",58),e.NdJ("change",function(){const s=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.onDateChange(s))}),e.YNc(9,Ze,2,2,"option",36),e.qZA(),e.YNc(10,Ce,4,3,"div",10),e.qZA(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.controls.name.value),e.xp6(3),e.Q6J("ngForOf",t.controls.monthValues.value),e.xp6(3),e.Q6J("ngForOf",o.days),e.xp6(1),e.Q6J("ngIf",t.get("day").touched&&t.hasError("invalidDate"))}}function Ee(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",59),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",60)(5,"table",54)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",61),e.YNc(16,De,11,5,"tr",56),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"DAY")),e.xp6(3),e.Q6J("ngForOf",t.halfYearlyRemindersArray.controls)}}function Fe(i,r){if(1&i&&(e.TgZ(0,"div",4)(1,"div",38),e.YNc(2,_e,6,4,"div",39),e.YNc(3,ve,7,4,"div",39),e.YNc(4,Ae,17,10,"div",39),e.YNc(5,Ee,17,10,"div",39),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","0"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","1"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","3"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","4"==t.reminderForm.get("frequency").value)}}function Se(i,r){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DATE_IS_REQUIRED")," "))}function Ne(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Se,3,3,"div",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.required)}}function Le(i,r){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Me(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Le,3,3,"div",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.owlDateTimeMin)}}function qe(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",62),e.YNc(5,Ne,2,1,"div",10),e.YNc(6,Me,2,1,"div",10),e._UZ(7,"owl-date-time",null,63),e.qZA()),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"REMINDER_DATE")," *"),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors)}}function Ue(i,r){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_IS_REQUIRED")," "))}function Qe(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ue,3,3,"div",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.required)}}function Ye(i,r){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Ie(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ye,3,3,"div",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.owlDateTimeMin)}}function Je(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",64),e.YNc(5,Qe,2,1,"div",10),e.YNc(6,Ie,2,1,"div",10),e._UZ(7,"owl-date-time",null,65),e.qZA()),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"REMINDER_START_DATE")," *"),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors)}}function ke(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"label",66),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",67)(5,"owl-date-time",null,68),e.qZA()),2&i){const t=e.MAs(6);e.xp6(2),e.hij("",e.lcZ(3,3,"REMINDER_END_DATE")," "),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("owlDateTime",t)}}function Oe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.createReminder())}),e._UZ(1,"i",70),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function je(i,r){1&i&&(e.TgZ(0,"div",71),e._UZ(1,"mat-spinner"),e.qZA())}const we=function(){return["REM_ADD_REMINDER","REM_UPDATE_REMINDER"]},Be=function(){return["/reminders"]};let S=(()=>{class i extends M.H{constructor(t,n,o,s,m,c,v){super(v),this.fb=t,this.reminderService=n,this.commonService=o,this.toastrService=s,this.route=m,this.activatedRoute=c,this.translationService=v,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.selectedUsers=[],this.isLoading=!1,this.dayOfWeek=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}],this.months=[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],this.days=[],this.getLangDir()}get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}ngOnInit(){for(let t=1;t<=31;t++)this.days.push(t);this.getReminderFrequency(),this.createReminderForm(),this.sub$.sink=this.activatedRoute.data.subscribe(t=>{t.reminder&&(this.reminder=Object.assign({},t.reminder),this.reminderForm.patchValue(this.reminder),this.onFrequencyChange(),this.reminderForm.patchValue(this.reminder),this.reminderForm.get("isRepeated").value&&this.reminderForm.get("frequency").setValidators([d.kI.required]))}),this.getUsers()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}createReminderForm(){var t=new Date;this.reminderForm=this.fb.group({id:[""],subject:["",[d.kI.required]],message:["",[d.kI.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[t,[d.kI.required]],endDate:[null],dayOfWeek:[2]})}checkData(t){t.checked?this.reminderForm.get("frequency").setValidators([d.kI.required]):this.reminderForm.get("frequency").setValidators([])}createReminder(){if(!this.reminderForm.valid)return void this.reminderForm.markAllAsTouched();let t=this.reminderForm.value;t.reminderUsers=this.selectedUsers.map(n=>({reminderId:t.id,userId:n.id})),t.isRepeated&&(t.frequencyId="6"),this.reminder?(t.dailyReminders&&(t.dailyReminders=t.dailyReminders.map(n=>(n.reminderId=this.reminder.id,n))),t.quarterlyReminders&&(t.quarterlyReminders=t.quarterlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),t.halfYearlyReminders&&(t.halfYearlyReminders=t.halfYearlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),this.isLoading=!0,this.sub$.sink=this.reminderService.updateReminder(t).subscribe(n=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.route.navigate(["/reminders"]),this.isLoading=!1},()=>this.isLoading=!1)):(this.isLoading=!0,this.sub$.sink=this.reminderService.addReminder(t).subscribe(n=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.route.navigate(["/reminders"]),this.isLoading=!1},()=>this.isLoading=!1))}getUsers(){this.sub$.sink=this.commonService.getAllUsers().subscribe(t=>{if(this.users=t,this.reminder){const n=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.users.filter(o=>n.indexOf(o.id)>=0)}})}onFrequencyChange(){let t=this.reminderForm.get("frequency").value;t=0==t?"0":t,t==_.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==_.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(2)):t==_.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==_.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){var t=this.fb.array([]);t.push(this.createDailyReminderFormGroup(u.Sunday)),t.push(this.createDailyReminderFormGroup(u.Monday)),t.push(this.createDailyReminderFormGroup(u.Tuesday)),t.push(this.createDailyReminderFormGroup(u.Wednesday)),t.push(this.createDailyReminderFormGroup(u.Thursday)),t.push(this.createDailyReminderFormGroup(u.Friday)),t.push(this.createDailyReminderFormGroup(u.Saturday)),this.reminderForm.addControl("dailyReminders",t)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){var t=this.fb.array([]),n=this.months.filter(c=>[1,2,3].indexOf(c.id)>=0),o=this.months.filter(c=>[4,5,6].indexOf(c.id)>=0),s=this.months.filter(c=>[7,8,9].indexOf(c.id)>=0),m=this.months.filter(c=>[10,11,12].indexOf(c.id)>=0);t.push(this.createQuarterlyReminderFormGroup(g.Quarter1,"Jan - Mar",n)),t.push(this.createQuarterlyReminderFormGroup(g.Quarter2,"Apr - Jun",o)),t.push(this.createQuarterlyReminderFormGroup(g.Quarter3,"Jul - Sept",s)),t.push(this.createQuarterlyReminderFormGroup(g.Quarter4,"Oct - Dec",m)),this.reminderForm.addControl("quarterlyReminders",t)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){var t=this.fb.array([]),n=this.months.filter(s=>[1,2,3,4,5,6].indexOf(s.id)>=0),o=this.months.filter(s=>[7,8,9,10,11,13].indexOf(s.id)>=0);t.push(this.createHalfYearlyReminderFormGroup(g.Quarter1,"Jan - Jun",n)),t.push(this.createHalfYearlyReminderFormGroup(g.Quarter2,"Jul - Dec",o)),this.reminderForm.addControl("halfYearlyReminders",t)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(t){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[t],isActive:[!0],name:[u[t]]})}createQuarterlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}createHalfYearlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}getCurrentDay(){return(new Date).getDate()}onDateChange(t){const n=t.get("day").value,o=t.get("month").value;n>new Date((new Date).getFullYear(),Number.parseInt(o),0).getDate()&&(t.setErrors({invalidDate:"Invalid Date"}),t.markAllAsTouched())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.QS),e.Y36(D),e.Y36(U.v),e.Y36(Q._W),e.Y36(p.F0),e.Y36(p.gz),e.Y36(Y.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-reminder"]],features:[e.qOj],decls:53,vars:42,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject",1,"text-danger"],["formControlName","subject","type","text","id","subject",1,"form-control"],[4,"ngIf"],["for","message",1,"text-danger"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-2"],["color","primary","formControlName","isRepeated",3,"dir","change"],["color","primary","formControlName","isEmailNotification",3,"dir"],[1,"col-md-4"],["multiple","",1,"form-control",3,"dir","placeholder","value","valueChange"],[3,"dir"],["class","example-additional-selection",4,"ngIf"],[3,"dir","value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","form-group col-md-6",4,"ngIf"],[1,"mt-2","col-md-12"],["type","submit","class","btn btn-success btn-sm m-right-10",3,"click",4,"hasClaim"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],["class","loading-shade",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"example-additional-selection"],[3,"dir","value"],[1,"form-group","col-md-6"],["for","frequency",1,"text-danger"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate","placeholder","Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt2",""],["formControlName","startDate","placeholder","Start Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt3",""],["for","frequency"],["formControlName","endDate","placeholder","End Date",1,"form-control",3,"owlDateTimeTrigger","owlDateTime"],["dt4",""],["type","submit",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"form",6)(10,"div",4)(11,"div",7)(12,"label",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,ae,2,1,"div",10),e.qZA()(),e.TgZ(17,"div",4)(18,"div",7)(19,"label",11),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"textarea",12),e.YNc(23,de,2,1,"div",10),e.qZA()(),e.TgZ(24,"div",4)(25,"div",13)(26,"mat-checkbox",14),e.NdJ("change",function(s){return n.checkData(s)}),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",13)(30,"mat-checkbox",15),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div",16)(34,"mat-select",17),e.NdJ("valueChange",function(s){return n.selectedUsers=s}),e.ALo(35,"translate"),e.TgZ(36,"mat-select-trigger",18),e.YNc(37,le,2,2,"span",10),e.YNc(38,ce,2,2,"span",19),e.qZA(),e.YNc(39,me,2,4,"mat-option",20),e.qZA()()(),e.YNc(40,ge,11,8,"div",21),e.YNc(41,Fe,6,4,"div",21),e.TgZ(42,"div",4),e.YNc(43,qe,9,8,"div",22),e.YNc(44,Je,9,8,"div",22),e.YNc(45,ke,7,5,"div",22),e.TgZ(46,"div",23),e.YNc(47,Oe,4,3,"button",24),e.TgZ(48,"button",25),e._UZ(49,"i",26),e._uU(50),e.ALo(51,"translate"),e.qZA()()()()()(),e.YNc(52,je,2,0,"div",27)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,26,"MANAGE_REMINDER")),e.xp6(4),e.Q6J("formGroup",n.reminderForm),e.xp6(4),e.hij(" ",e.lcZ(14,28,"SUBJECT")," *"),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("subject").touched&&n.reminderForm.get("subject").errors),e.xp6(4),e.hij(" ",e.lcZ(21,30,"MESSAGE")," *"),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("message").touched&&n.reminderForm.get("message").errors),e.xp6(3),e.Q6J("dir",n.langDir),e.xp6(1),e.hij(" ",e.lcZ(28,32,"REPEATE_REMINDER")," "),e.xp6(3),e.Q6J("dir",n.langDir),e.xp6(1),e.hij("",e.lcZ(32,34,"SEND_EMAIL")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(35,36,"SELECT_USERS")),e.Q6J("dir",n.langDir)("value",n.selectedUsers),e.xp6(2),e.Q6J("dir",n.langDir),e.xp6(1),e.Q6J("ngIf",n.selectedUsers.length>0),e.xp6(1),e.Q6J("ngIf",n.selectedUsers.length>1),e.xp6(1),e.Q6J("ngForOf",n.users),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(2),e.Q6J("ngIf",!n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(2),e.Q6J("hasClaim",e.DdM(40,we)),e.xp6(1),e.Q6J("routerLink",e.DdM(41,Be)),e.xp6(2),e.hij(" ",e.lcZ(51,38,"CANCEL"),""),e.xp6(2),e.Q6J("ngIf",n.isLoading))},dependencies:[h.sg,h.O5,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,p.rH,d.sg,d.u,d.x0,d.CE,T.sZ,T.BO,T.hV,E.Ou,I.Lv,J.oG,x.gD,x.$L,f.ey,k.d,F.VQ,F.U0,O.X$]}),i})();var N=a(591),Ge=a(2654),j=a(1086),$e=a(537);class He{constructor(r){this.reminderService=r,this._reminderSubject$=new N.X([]),this._responseHeaderSubject$=new N.X(null),this.loadingSubject=new N.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this._responseHeaderSubject$.asObservable()}get count(){return this._count}connect(){return this.sub$=new Ge.w,this._reminderSubject$.asObservable()}disconnect(){this._reminderSubject$.complete(),this.loadingSubject.complete(),this.sub$.unsubscribe()}loadData(r){this.loadingSubject.next(!0),this.sub$=this.reminderService.getReminders(r).pipe((0,R.K)(()=>(0,j.of)([])),(0,$e.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{if(t&&t.headers.get("X-Pagination")){const n=JSON.parse(t.headers.get("X-Pagination"));this._responseHeaderSubject$.next(n)}if(t){const n=[...t.body];this._count=n.length,this._reminderSubject$.next(n)}})}}var w=a(2349),Ve=a(5485),Z=a(2181),B=a(7423),l=a(2075),G=a(5245),ze=a(1615),Ke=a(8017),Pe=a(2760);let We=(()=>{class i{transform(t,...n){const o=Pe.c.find(s=>s.id==t);return o?o.name:""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"frequency",type:i,pure:!0}),i})();const Xe=function(){return["/reminders/add"]};function et(i,r){1&i&&(e.TgZ(0,"button",31),e._UZ(1,"i",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.Q6J("routerLink",e.DdM(4,Xe)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ADD_REMINDER")," "))}function tt(i,r){1&i&&e._UZ(0,"th",33)}function it(i,r){if(1&i&&(e.TgZ(0,"button",39)(1,"mat-icon"),e._uU(2,"more_vert"),e.qZA()()),2&i){e.oxw();const t=e.MAs(3);e.Q6J("matMenuTriggerFor",t)}}const nt=function(i){return["/reminders/manage",i]};function rt(i,r){if(1&i&&(e.TgZ(0,"button",40)(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(4,nt,t.id)),e.xp6(4),e.Oqu(e.lcZ(5,2,"EDIT"))}}function ot(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deleteReminder(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"DELETE")))}const at=function(){return["REM_UPDATE_REMINDER","REM_DELETE_REMINDER"]};function st(i,r){1&i&&(e.TgZ(0,"td",34),e.YNc(1,it,3,1,"button",35),e.TgZ(2,"mat-menu",null,36),e.YNc(4,rt,6,6,"button",37),e.YNc(5,ot,6,3,"button",38),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("hasClaim",e.DdM(3,at)),e.xp6(3),e.Q6J("hasClaim","REM_UPDATE_REMINDER"),e.xp6(1),e.Q6J("hasClaim","REM_DELETE_REMINDER"))}function dt(i,r){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE")," "))}function lt(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.ALo(2,"utcToLocalTime"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.startDate,"short")," ")}}function ct(i,r){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"END_DATE")," "))}function mt(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.ALo(2,"utcToLocalTime"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.endDate,"short")," ")}}function ut(i,r){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SUBJECT")," "))}function ht(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.subject,100)," ")}}function gt(i,r){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE")," "))}function pt(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.message,150)," ")}}function _t(i,r){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FREQUENCY")," "))}function ft(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.ALo(2,"frequency"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.frequency)," ")}}function vt(i,r){1&i&&e._UZ(0,"th",33)}function Rt(i,r){1&i&&e._UZ(0,"th",33)}function Tt(i,r){1&i&&e._UZ(0,"th",33)}function bt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"th",33)(1,"input",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.SubjectFilter=o)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"SUBJECT")),e.Q6J("ngModel",t.SubjectFilter)}}function yt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"th",33)(1,"input",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.MessageFilter=o)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"MESSAGE")),e.Q6J("ngModel",t.MessageFilter)}}function At(i,r){if(1&i&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function xt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"th",33)(1,"mat-select",44),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.FrequencyFilter=o)}),e.ALo(2,"translate"),e.TgZ(3,"mat-option",45),e._uU(4,"None"),e.qZA(),e.YNc(5,At,2,2,"mat-option",46),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"FREQUENCY")),e.Q6J("dir",t.langDir)("ngModel",t.FrequencyFilter),e.xp6(4),e.Q6J("ngForOf",t.reminderFrequencies)}}const Zt=function(){return[15,20,30]};function Ct(i,r){if(1&i&&(e.TgZ(0,"td",47),e._UZ(1,"mat-paginator",48),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dir",t.langDir)("length",t.reminderResource.totalCount)("pageSize",t.reminderResource.pageSize)("pageSizeOptions",e.DdM(4,Zt))}}function Dt(i,r){1&i&&(e.TgZ(0,"tr")(1,"td",49)(2,"span",50)(3,"b"),e._uU(4),e.ALo(5,"translate"),e.qZA()()()()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"NO_DATA_FOUND"),""))}function Et(i,r){1&i&&e._UZ(0,"tr",51)}function Ft(i,r){1&i&&e._UZ(0,"tr",52)}function St(i,r){1&i&&e._UZ(0,"tr",51)}function Nt(i,r){1&i&&e._UZ(0,"tr",53)}function Lt(i,r){1&i&&(e.TgZ(0,"div",54),e._UZ(1,"mat-spinner"),e.qZA())}const Mt=function(){return["action-search","date-search","enddate-search","subject-search","message-search","frequency-search"]};let qt=(()=>{class i extends M.H{constructor(t,n,o,s,m,c){super(c),this.reminderService=t,this.dialog=n,this.commonService=o,this.commonDialogService=s,this.toastrService=m,this.translationService=c,this.reminders=[],this.reminderFrequencies=[],this.displayedColumns=["action","startDate","endDate","subject","message","frequency"],this.footerToDisplayed=["footer"],this.isLoadingResults=!0,this.filterObservable$=new X.xQ,this.getLangDir(),this.reminderResource=new W.t,this.reminderResource.pageSize=15,this.reminderResource.orderBy="startDate desc"}get SubjectFilter(){return this._subjectFilter}set SubjectFilter(t){this._subjectFilter=t,this.filterObservable$.next(`subject:${t}`)}set FrequencyFilter(t){this._frequencyFilter="0"==t?"0":t?t.toString():"",this.filterObservable$.next(`frequency:${this._frequencyFilter}`)}get FrequencyFilter(){return this._frequencyFilter}get MessageFilter(){return this._messageFilter}set MessageFilter(t){this._messageFilter=t,this.filterObservable$.next(`message:${t}`)}ngOnInit(){this.getReminderFrequency(),this.dataSource=new He(this.reminderService),this.dataSource.loadData(this.reminderResource),this.getResourceParameter(),this.sub$.sink=this.filterObservable$.pipe((0,te.b)(1e3),(0,ie.x)()).subscribe(t=>{this.reminderResource.skip=0,this.paginator.pageIndex=0;const n=t.split(":");"subject"===n[0]?this.reminderResource.subject=escape(n[1]):"message"===n[0]?this.reminderResource.message=n[1]:"frequency"===n[0]&&(this.reminderResource.frequency=n[1]),this.dataSource.loadData(this.reminderResource)})}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.reminderResource.pageSize=t.pageSize,this.reminderResource.skip=t.skip,this.reminderResource.totalCount=t.totalCount)})}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,ee.T)(this.sort.sortChange,this.paginator.page).pipe((0,ne.b)(t=>{this.reminderResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.reminderResource.pageSize=this.paginator.pageSize,this.reminderResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.reminderResource)})).subscribe()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}editReminder(t){this.isLoadingResults=!0,this.sub$.sink=this.reminderService.getReminder(t.id).subscribe(n=>{this.isLoadingResults=!1;let o=this.dialog.open(S,{width:"60vw",direction:this.langDir,data:Object.assign({},{frequencies:this.reminderFrequencies,reminder:n})});this.sub$.sink=o.afterClosed().subscribe(s=>{s&&this.dataSource.loadData(this.reminderResource)})},()=>this.isLoadingResults=!1)}deleteReminder(t){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")}?`).subscribe(n=>{n&&(this.isLoadingResults=!0,this.reminderService.deleteReminder(t.id).subscribe(()=>{this.isLoadingResults=!1,this.toastrService.success(this.translationService.getValue("REMINDER_DELETED_SUCCESSFULLY")),this.dataSource.loadData(this.reminderResource)},()=>this.isLoadingResults=!1))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D),e.Y36(w.uw),e.Y36(U.v),e.Y36(Ve.V),e.Y36(Q._W),e.Y36(Y.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reminder-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(C.NW,5),e.Gf(A.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first)}},features:[e.qOj],decls:51,vars:14,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto","col"],[1,"content-header"],[1,"col-md-auto","col-sm-auto","col-auto"],["class","btn blue-btn btn-sm m-right-10",3,"routerLink",4,"hasClaim"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","grid-height"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",3,"dir","dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","startDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","endDate"],["matColumnDef","subject"],["matColumnDef","message"],["matColumnDef","frequency"],["matColumnDef","action-search"],["matColumnDef","date-search"],["matColumnDef","enddate-search"],["matColumnDef","subject-search"],["matColumnDef","message-search"],["matColumnDef","frequency-search"],["matColumnDef","footer"],["mat-footer-cell","","colspan","6",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["class","loading-shade",4,"ngIf"],[1,"btn","blue-btn","btn-sm","m-right-10",3,"routerLink"],[1,"fas","fa-plus"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor",4,"hasClaim"],["menu","matMenu"],["mat-menu-item","",3,"routerLink",4,"hasClaim"],["mat-menu-item","",3,"click",4,"hasClaim"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header",""],["type","text",1,"form-control","w-90",3,"placeholder","ngModel","ngModelChange"],[1,"form-control",3,"dir","placeholder","ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-footer-cell","","colspan","6"],[3,"dir","length","pageSize","pageSizeOptions"],["colspan","9"],[1,"p-4","mt-4"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",4),e.YNc(8,et,4,5,"button",5),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"table",8),e.ynx(12,9),e.YNc(13,tt,1,0,"th",10),e.YNc(14,st,6,4,"td",11),e.BQk(),e.ynx(15,12),e.YNc(16,dt,3,3,"th",13),e.YNc(17,lt,3,4,"td",11),e.BQk(),e.ynx(18,14),e.YNc(19,ct,3,3,"th",13),e.YNc(20,mt,3,4,"td",11),e.BQk(),e.ynx(21,15),e.YNc(22,ut,3,3,"th",13),e.YNc(23,ht,3,4,"td",11),e.BQk(),e.ynx(24,16),e.YNc(25,gt,3,3,"th",13),e.YNc(26,pt,3,4,"td",11),e.BQk(),e.ynx(27,17),e.YNc(28,_t,3,3,"th",13),e.YNc(29,ft,3,3,"td",11),e.BQk(),e.ynx(30,18),e.YNc(31,vt,1,0,"th",10),e.BQk(),e.ynx(32,19),e.YNc(33,Rt,1,0,"th",10),e.BQk(),e.ynx(34,20),e.YNc(35,Tt,1,0,"th",10),e.BQk(),e.ynx(36,21),e.YNc(37,bt,3,4,"th",10),e.BQk(),e.ynx(38,22),e.YNc(39,yt,3,4,"th",10),e.BQk(),e.ynx(40,23),e.YNc(41,xt,6,6,"th",10),e.BQk(),e.ynx(42,24),e.YNc(43,Ct,2,5,"td",25),e.BQk(),e.YNc(44,Dt,6,3,"tr",26),e.YNc(45,Et,1,0,"tr",27),e.YNc(46,Ft,1,0,"tr",28),e.YNc(47,St,1,0,"tr",27),e.YNc(48,Nt,1,0,"tr",29),e.qZA()()(),e.YNc(49,Lt,2,0,"div",30),e.ALo(50,"async")),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,9,"REMINDERS")),e.xp6(3),e.Q6J("hasClaim","REM_ADD_REMINDER"),e.xp6(3),e.Q6J("dir",n.langDir)("dataSource",n.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",e.DdM(13,Mt)),e.xp6(1),e.Q6J("matFooterRowDef",n.footerToDisplayed),e.xp6(1),e.Q6J("ngIf",e.lcZ(50,11,n.dataSource.loading$)))},dependencies:[h.sg,h.O5,d.Fj,d.JJ,d.On,p.rH,E.Ou,I.Lv,x.gD,f.ey,k.d,Z.VK,Z.OP,Z.p6,B.lW,C.NW,A.YE,A.nU,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.mD,l.Ke,l.ge,l.ev,l.yh,l.XQ,l.Gk,l.Q2,l.Ee,G.Hw,h.Ov,ze.W,Ke.M,O.X$,We]}),i})();var Ut=a(2986),Qt=a(1709);let $=(()=>{class i{constructor(t,n){this.cs=t,this.router=n}resolve(t,n){const o=t.paramMap.get("id");return"add"===o?null:this.cs.getReminder(o).pipe((0,Ut.q)(1),(0,Qt.zg)(s=>s?(0,j.of)(s):(this.router.navigate(["/reminders"]),null)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(D),e.LFG(p.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var L=a(319);const Yt=[{path:"",component:qt,data:{claimType:"REM_VIEW_REMINDERS"},canActivate:[L.a]},{path:"add",component:S,data:{claimType:"REM_ADD_REMINDER"},canActivate:[L.a]},{path:"manage/:id",resolve:{reminder:$},component:S,data:{claimType:"REM_UPDATE_REMINDER"},canActivate:[L.a]}];let It=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,p.Bz.forChild(Yt),p.Bz]}),i})();var Jt=a(7531),kt=a(7108),Ot=a(2368),jt=a(9224);a(3191),a(449),a(5664);let Pt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.BQ,f.si,f.BQ]}),i})(),Wt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[$],imports:[h.ez,d.u5,It,d.UX,T.Ll,T.x,E.Cq,J.p9,w.Is,x.LD,Ot.rP,kt.m,Z.Tx,B.ot,jt.QW,C.TU,A.JX,Jt.c,l.p0,Pt,F.Fk,G.Ps]}),i})()}}]);