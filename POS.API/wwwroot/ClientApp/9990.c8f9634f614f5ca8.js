"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[9990],{9990:(B,u,n)=>{n.r(u),n.d(u,{CompanyProfileModule:()=>V});var p=n(9808),a=n(3075),v=n(2340),h=n(1490),o=n(5e3),m=n(2554),y=n(1076),C=n(2290),Z=n(130),P=n(6107),A=n(690),T=n(9785),L=n(226),f=n(9224),d=n(4107),x=n(508),U=n(1062);function S(e,r){if(1&e&&(o.TgZ(0,"mat-option",31),o._uU(1),o.qZA()),2&e){const t=r.$implicit;o.Q6J("value",t.symbol),o.xp6(1),o.AsE(" ",t.name," (",t.symbol,") ")}}function F(e,r){1&e&&(o.TgZ(0,"div",10),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function b(e,r){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,F,3,3,"div",32),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.companyProfileForm.get("email").errors?null:t.companyProfileForm.get("email").errors.email)}}function E(e,r){if(1&e&&o._UZ(0,"img",33),2&e){const t=o.oxw();o.Q6J("src",t.imgSrc,o.LSH)}}function I(e,r){1&e&&o._UZ(0,"img",34)}function N(e,r){1&e&&(o.TgZ(0,"button",35),o._UZ(1,"i",36),o._uU(2),o.ALo(3,"translate"),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"SAVE")," "))}function J(e,r){1&e&&o._UZ(0,"mat-spinner")}function Y(e,r){if(1&e&&(o.TgZ(0,"div",37),o.YNc(1,J,1,0,"mat-spinner",17),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.isLoading)}}const O=function(){return["/dashboard"]};let D=(()=>{class e extends h.H{constructor(t,i,c,l,s,_,g,H){super(g),this.route=t,this.fb=i,this.companyProfileService=c,this.router=l,this.toastrService=s,this.securityService=_,this.translationService=g,this.commonService=H,this.imgSrc="",this.isLoading=!1,this.currencies=[],this.getLangDir()}ngOnInit(){this.createform(),this.getCurrencies(),this.route.data.subscribe(t=>{this.companyProfileForm.patchValue(t.profile),t.profile.logoUrl&&(this.imgSrc=v.N.apiUrl+t.profile.logoUrl)})}createform(){this.companyProfileForm=this.fb.group({id:[""],title:["",[a.kI.required]],address:["",[a.kI.required]],logoUrl:[""],imageData:[],phone:[""],email:["",[a.kI.email]],currencyCode:["",[a.kI.required]]})}getCurrencies(){this.commonService.getCurrencies().subscribe(t=>this.currencies=t)}saveCompanyProfile(){if(this.companyProfileForm.invalid)return void this.companyProfileForm.markAllAsTouched();const t=this.companyProfileForm.getRawValue();this.isLoading=!0,this.companyProfileService.updateCompanyProfile(t).subscribe(i=>{this.isLoading=!1,this.securityService.updateProfile(i),this.toastrService.success(this.translationService.getValue("COMPANY_PROFILE_UPDATED_SUCCESSFULLY")),this.router.navigate(["dashboard"])},()=>this.isLoading=!1)}onFileSelect(t){const i=t.target.files[0];if(!i||null==i.type.match(/image\/*/))return;const l=new FileReader;l.readAsDataURL(i),l.onload=s=>{this.imgSrc=l.result,this.companyProfileForm.patchValue({imageData:l.result.toString(),logoUrl:i.name}),t.target.value=""}}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(m.gz),o.Y36(a.QS),o.Y36(y.V),o.Y36(m.F0),o.Y36(C._W),o.Y36(Z.I),o.Y36(P.D),o.Y36(A.v))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-company-profile"]],features:[o.qOj],decls:66,vars:38,consts:[[1,"page-header-main","mt-2"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-row"],[1,"form-group"],["formControlName","title","type","text",1,"form-control","w-100"],[1,"text-danger"],["formControlName","currencyCode",1,"form-control",3,"dir","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],["cols","30","rows","3","formControlName","address",1,"form-control","w-100"],["formControlName","phone","type","text",1,"form-control","w-100"],["formControlName","email","type","text",1,"form-control","w-100"],[4,"ngIf"],[1,"row","text-center"],[1,"col-md-9","mt-2","ml-5"],[1,"cus-mat-card",3,"dir"],["hidden","","name","logo","type","file","name","Profile Photo","fxFlex","30",3,"change"],["fileInput",""],["class","full-width",3,"src",4,"ngIf"],["class","full-width","src","../../assets/images/logo.png",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm","mb-2",3,"click"],[1,"far","fa-image"],["type","submit","class","btn btn-success btn-sm mr-2",4,"hasClaim"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],["class","loading-shade",4,"ngIf"],[3,"value"],["class","text-danger",4,"ngIf"],[1,"full-width",3,"src"],["src","../../assets/images/logo.png",1,"full-width"],["type","submit",1,"btn","btn-success","btn-sm","mr-2"],[1,"fas","fa-save"],[1,"loading-shade"]],template:function(t,i){if(1&t){const c=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),o._uU(5),o.ALo(6,"translate"),o.qZA()()()()(),o.TgZ(7,"form",4),o.NdJ("ngSubmit",function(){return i.saveCompanyProfile()}),o.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",6)(12,"div",8)(13,"label"),o._uU(14),o.ALo(15,"translate"),o.qZA(),o._UZ(16,"input",9),o.qZA()(),o.TgZ(17,"div",6)(18,"label",10),o._uU(19),o.ALo(20,"translate"),o.qZA(),o.TgZ(21,"mat-select",11),o.ALo(22,"translate"),o.YNc(23,S,2,3,"mat-option",12),o.qZA()(),o.TgZ(24,"div",13)(25,"div",8)(26,"label"),o._uU(27),o.ALo(28,"translate"),o.qZA(),o._UZ(29,"textarea",14),o.qZA()(),o.TgZ(30,"div",13)(31,"div",5)(32,"div",6)(33,"div",8)(34,"label"),o._uU(35),o.ALo(36,"translate"),o.qZA(),o._UZ(37,"input",15),o.qZA()(),o.TgZ(38,"div",6)(39,"div",8)(40,"label"),o._uU(41),o.ALo(42,"translate"),o.qZA(),o._UZ(43,"input",16),o.YNc(44,b,2,1,"div",17),o.qZA()()()()()(),o.TgZ(45,"div",6)(46,"div",18)(47,"div",19)(48,"mat-card",20)(49,"input",21,22),o.NdJ("change",function(s){return i.onFileSelect(s)}),o.qZA(),o.YNc(51,E,1,1,"img",23),o.YNc(52,I,1,0,"img",24),o.TgZ(53,"mat-card-actions")(54,"button",25),o.NdJ("click",function(){o.CHM(c);const s=o.MAs(50);return o.KtG(s.click())}),o._UZ(55,"i",26),o._uU(56),o.ALo(57,"translate"),o.qZA()()()()()()(),o.TgZ(58,"div",5)(59,"div",13),o.YNc(60,N,4,3,"button",27),o.TgZ(61,"button",28),o._UZ(62,"i",29),o._uU(63),o.ALo(64,"translate"),o.qZA()()()(),o.YNc(65,Y,2,1,"div",30)}2&t&&(o.xp6(5),o.Oqu(o.lcZ(6,19,"COMPANY_PROFILE")),o.xp6(2),o.Q6J("formGroup",i.companyProfileForm),o.xp6(7),o.Oqu(o.lcZ(15,21,"TITLE")),o.xp6(5),o.hij("",o.lcZ(20,23,"CURRENCY")," *"),o.xp6(2),o.s9C("placeholder",o.lcZ(22,25,"CURRENCY")),o.Q6J("dir",i.langDir),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(4),o.Oqu(o.lcZ(28,27,"ADDRESS")),o.xp6(8),o.Oqu(o.lcZ(36,29,"PHONE_NUMBER")),o.xp6(6),o.Oqu(o.lcZ(42,31,"EMAIL")),o.xp6(3),o.Q6J("ngIf",i.companyProfileForm.get("email").touched&&i.companyProfileForm.get("email").errors),o.xp6(4),o.Q6J("dir",i.langDir),o.xp6(3),o.Q6J("ngIf",i.imgSrc),o.xp6(1),o.Q6J("ngIf",!i.imgSrc),o.xp6(4),o.hij(" ",o.lcZ(57,33,"CHANGE_LOGO"),""),o.xp6(4),o.Q6J("hasClaim","SETT_UPDATE_COM_PROFILE"),o.xp6(1),o.Q6J("routerLink",o.DdM(37,O)),o.xp6(2),o.hij(" ",o.lcZ(64,35,"CANCEL")," "),o.xp6(2),o.Q6J("ngIf",i.isLoading))},dependencies:[p.sg,p.O5,m.rH,T.d,L.Lv,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,f.a8,f.hq,d.gD,x.ey,U.X$]}),e})();var M=n(319),R=n(1539);const Q=[{path:"",component:D,data:{claimType:"SETT_UPDATE_COM_PROFILE"},canActivate:[M.a],resolve:{profile:R.X}}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.Bz.forChild(Q),m.Bz]}),e})();var q=n(7108);let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[p.ez,j,q.m,a.UX,f.QW,d.LD]}),e})()}}]);