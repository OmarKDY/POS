"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[2800],{5519:(_,u,a)=>{a.d(u,{r:()=>l});class l{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0}}},2800:(_,u,a)=>{a.r(u),a.d(u,{NLogModule:()=>xe});var l=a(9808),g=a(2554),L=a(319),e=a(5e3),f=a(520),m=a(7221),b=a(8032);let v=(()=>{class t{constructor(o,i){this.httpClient=o,this.commonHttpErrorService=i}getNLogs(o){const s=(new f.LE).set("Fields",o.fields).set("OrderBy",o.orderBy).set("PageSize",o.pageSize.toString()).set("Skip",o.skip.toString()).set("SearchQuery",o.searchQuery).set("level",o.level).set("source",o.source).set("message",o.message.toString());return this.httpClient.get("NLog",{params:s,observe:"response"}).pipe((0,m.K)(this.commonHttpErrorService.handleError))}getLogDetails(o){return this.httpClient.get(`NLog/${o}`).pipe((0,m.K)(this.commonHttpErrorService.handleError))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(f.eN),e.LFG(b.U))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Z=(()=>{class t{constructor(o){this.nLogService=o}resolve(o,i){const s=o.paramMap.get("id");return this.nLogService.getLogDetails(s)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var C=a(1490),N=a(6107),x=a(1062);function R(t,n){1&t&&(e.TgZ(0,"label",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SOURCE")," "))}function y(t,n){if(1&t&&(e.TgZ(0,"div",20),e._UZ(1,"input",17),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.s9C("value",o.log.source)}}function D(t,n){if(1&t&&(e.TgZ(0,"div",14)(1,"label",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._UZ(5,"textarea",17),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"MESSAGE")," "),e.xp6(3),e.s9C("value",o.log.message)}}function U(t,n){if(1&t&&(e.TgZ(0,"div",14)(1,"label",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._UZ(5,"textarea",17),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"LOGGER")," "),e.xp6(3),e.s9C("value",o.log.logger)}}function E(t,n){if(1&t&&(e.TgZ(0,"div",14)(1,"label",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._UZ(5,"textarea",17),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"PROPERTIES")," "),e.xp6(3),e.s9C("value",o.log.properties)}}function O(t,n){if(1&t&&(e.TgZ(0,"div",14)(1,"label",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._UZ(5,"textarea",17),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"CALLSITE")," "),e.xp6(3),e.s9C("value",o.log.callsite)}}function j(t,n){if(1&t&&(e.TgZ(0,"div",14)(1,"label",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._UZ(5,"textarea",21),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"EXCEPTION")," "),e.xp6(3),e.s9C("value",o.log.exception)}}const w=function(){return["/logs"]};let Q=(()=>{class t extends C.H{constructor(o,i){super(i),this.activeRoute=o,this.translationService=i}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(o=>{o.log&&(this.log=o.log)})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(g.gz),e.Y36(N.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-n-log-detail"]],features:[e.qOj],decls:35,vars:26,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[1,"btn","btn-success","btn-sm","m-right-10",3,"routerLink"],[1,"fas","fa-backward"],[1,"mat-elevation-z8","py-4"],[1,"col-md-12"],[1,"row","pb-2"],["for","staticEmail",1,"col-sm-2","col-form-label","font-weight-bold"],[1,"col-sm-4"],["readonly","",1,"form-control"],["for","source","class","col-sm-1 col-form-label font-weight-bold",4,"ngIf"],["class","col-sm-5",4,"ngIf"],[1,"form-group","row"],["for","inputPassword",1,"col-sm-2","col-form-label","font-weight-bold"],[1,"col-sm-10"],["type","text","readonly","",1,"form-control",3,"value"],["class","form-group row",4,"ngIf"],["for","source",1,"col-sm-1","col-form-label","font-weight-bold"],[1,"col-sm-5"],["type","text","rows","10","readonly","",1,"form-control",3,"value"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",2)(8,"button",4),e._UZ(9,"i",5),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"div",6)(13,"div",7)(14,"div",8)(15,"label",9),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",10)(19,"span",11),e._uU(20),e.ALo(21,"date"),e.qZA()(),e.YNc(22,R,3,3,"label",12),e.YNc(23,y,2,1,"div",13),e.qZA(),e.TgZ(24,"div",14)(25,"label",15),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",16),e._UZ(29,"input",17),e.qZA()(),e.YNc(30,D,6,4,"div",18),e.YNc(31,U,6,4,"div",18),e.YNc(32,E,6,4,"div",18),e.YNc(33,O,6,4,"div",18),e.YNc(34,j,6,4,"div",18),e.qZA()()),2&o&&(e.xp6(5),e.Oqu(e.lcZ(6,14,"LOG_DETAIL")),e.xp6(3),e.Q6J("routerLink",e.DdM(25,w)),e.xp6(2),e.hij(" ",e.lcZ(11,16,"BACK_TO_LIST")," "),e.xp6(6),e.hij(" ",e.lcZ(17,18,"DATE_TIME")," "),e.xp6(4),e.Oqu(e.xi3(21,20,i.log.logged,"dd/MM/yyyy hh:mm:ss")),e.xp6(2),e.Q6J("ngIf",i.log.source),e.xp6(1),e.Q6J("ngIf",i.log.source),e.xp6(3),e.hij(" ",e.lcZ(27,23,"LEVEL")," "),e.xp6(3),e.s9C("value",i.log.level),e.xp6(1),e.Q6J("ngIf",i.log.message),e.xp6(1),e.Q6J("ngIf",i.log.logger),e.xp6(1),e.Q6J("ngIf",i.log.properties),e.xp6(1),e.Q6J("ngIf",i.log.callsite),e.xp6(1),e.Q6J("ngIf",i.log.exception))},dependencies:[l.O5,g.rH,l.uU,x.X$],styles:[".form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#fff!important}"]}),t})();var d=a(6087),p=a(4847),Y=a(5519);class I extends Y.r{constructor(){super(...arguments),this.message="",this.level="Fatal",this.source=".Net Core"}}var J=a(6787),q=a(3753),T=a(2868),M=a(13),z=a(5778),h=a(591),H=a(1086),$=a(537);class B{constructor(n){this.nLogService=n,this.nLogSubject=new h.X([]),this.responseHeaderSubject=new h.X(null),this.loadingSubject=new h.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get count(){return this._count}connect(){return this.nLogSubject.asObservable()}disconnect(){this.nLogSubject.complete(),this.loadingSubject.complete()}loadNLogs(n){this.loadingSubject.next(!0),this.nLogService.getNLogs(n).pipe((0,m.K)(()=>(0,H.of)([])),(0,$.x)(()=>this.loadingSubject.next(!1))).subscribe(o=>{const i=JSON.parse(o.headers.get("X-Pagination"));this.responseHeaderSubject.next(i);const s=[...o.body];this._count=s.length,this.nLogSubject.next(s)})}}var F=a(226),r=a(2075),S=a(773),A=a(4107),G=a(508),P=a(1615);const X=["input"];function k(t,n){1&t&&(e.TgZ(0,"div",27),e._UZ(1,"mat-spinner"),e.qZA())}function V(t,n){if(1&t&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function W(t,n){if(1&t&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function K(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACTION")," "))}const ee=function(t){return["/logs",t]};function te(t,n){if(1&t&&(e.TgZ(0,"td",29)(1,"button",30),e._UZ(2,"i",31),e.TgZ(3,"span",32),e._uU(4),e.ALo(5,"translate"),e.qZA()()()),2&t){const o=n.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(4,ee,o.id)),e.xp6(3),e.hij(" ",e.lcZ(5,2,"DETAIL"),"")}}function oe(t,n){1&t&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DATE_TIME")," "))}function ne(t,n){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==o?null:o.logged,"dd/MM/yyyy hh:mm:ss")," ")}}function ie(t,n){1&t&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LEVEL")," "))}function ae(t,n){if(1&t&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(null==o?null:o.level)}}function se(t,n){if(1&t&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(null==o?null:o.level)}}function le(t,n){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(null==o?null:o.level)}}function re(t,n){if(1&t&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(null==o?null:o.level)}}function ce(t,n){if(1&t&&(e.TgZ(0,"td",29),e.ynx(1,34),e.YNc(2,ae,2,1,"span",35),e.YNc(3,se,2,1,"span",35),e.YNc(4,le,2,1,"span",36),e.YNc(5,re,2,1,"span",37),e.BQk(),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.Q6J("ngSwitch",null==o?null:o.level),e.xp6(1),e.Q6J("ngSwitchCase","Fatal"),e.xp6(1),e.Q6J("ngSwitchCase","Error"),e.xp6(1),e.Q6J("ngSwitchCase","Warn")}}function ge(t,n){1&t&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE")," "))}function ue(t,n){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,o.message,80)," ")}}function pe(t,n){1&t&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SOURCE")," "))}function me(t,n){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.source," ")}}function de(t,n){1&t&&e._UZ(0,"tr",41)}function he(t,n){1&t&&e._UZ(0,"tr",42)}function Le(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",43)(2,"div",44)(3,"label",45),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"NO_DATA_FOUND"),""))}const fe=function(){return[10,20,30]},ve=[{path:"",component:(()=>{class t extends C.H{constructor(o,i){super(i),this.nLogService=o,this.translationService=i,this.logs=[],this.levels=["Fatal","Error","Warn","Info","Debug","Trace"],this.sources=[".Net Core","Angular"],this.displayedColumns=["action","logged","level","message","source"],this.isLoadingResults=!0,this.getLangDir(),this.nLogResource=new I,this.nLogResource.pageSize=10,this.nLogResource.orderBy="logged desc",this.nLogResource.level="Error",this.nLogResource.source=""}ngOnInit(){this.dataSource=new B(this.nLogService),this.dataSource.loadNLogs(this.nLogResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,J.T)(this.sort.sortChange,this.paginator.page).pipe((0,T.b)(o=>{this.nLogResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.nLogResource.pageSize=this.paginator.pageSize,this.nLogResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadNLogs(this.nLogResource)})).subscribe(),this.sub$.sink=(0,q.R)(this.input.nativeElement,"keyup").pipe((0,M.b)(1e3),(0,z.x)(),(0,T.b)(()=>{this.paginator.pageIndex=0,this.nLogResource.message=this.input.nativeElement.value,this.dataSource.loadNLogs(this.nLogResource)})).subscribe()}onLevelChange(o){this.nLogResource.level=o.value?o.value:"",this.nLogResource.skip=0,this.dataSource.loadNLogs(this.nLogResource)}onSourceChange(o){this.nLogResource.source=o.value?o.value:"",this.nLogResource.skip=0,this.dataSource.loadNLogs(this.nLogResource)}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(o=>{o&&(this.nLogResource.pageSize=o.pageSize,this.nLogResource.skip=o.skip,this.nLogResource.totalCount=o.totalCount)})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(v),e.Y36(N.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-n-log-list"]],viewQuery:function(o,i){if(1&o&&(e.Gf(d.NW,5),e.Gf(p.YE,5),e.Gf(X,5)),2&o){let s;e.iGM(s=e.CRH())&&(i.paginator=s.first),e.iGM(s=e.CRH())&&(i.sort=s.first),e.iGM(s=e.CRH())&&(i.input=s.first)}},features:[e.qOj],decls:50,vars:38,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-4","form-group"],[1,"form-control",3,"dir","value","placeholder","valueChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"placeholder"],["input",""],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","logged","matSortDirection","desc",1,"table","table-bordered","table-hover",3,"dir","dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","logged"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","level"],["matColumnDef","message"],["matColumnDef","source"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[1,"w-100",3,"dir","length","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-header-cell",""],["mat-cell",""],["type","button",1,"btn","btn-success","btn-sm","m-right-10",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"d-none","d-sm-inline"],["mat-header-cell","","mat-sort-header",""],[3,"ngSwitch"],["class","badge badge-danger",4,"ngSwitchCase"],["class","badge badge-warning",4,"ngSwitchCase"],["class","badge badge-primary",4,"ngSwitchDefault"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-primary"],["mat-header-row",""],["mat-row",""],[1,"row"],[1,"col-sm-12","ml-4","mt-3"],[1,"font-weight-bold"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()(),e.TgZ(7,"div",4),e.YNc(8,k,2,0,"div",5),e.ALo(9,"async"),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-select",8),e.NdJ("valueChange",function(c){return i.nLogResource.level=c})("selectionChange",function(c){return i.onLevelChange(c)}),e.ALo(13,"translate"),e.TgZ(14,"mat-option",9),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,V,2,2,"mat-option",10),e.qZA()(),e.TgZ(18,"div",7)(19,"mat-select",8),e.NdJ("valueChange",function(c){return i.nLogResource.source=c})("selectionChange",function(c){return i.onSourceChange(c)}),e.ALo(20,"translate"),e.TgZ(21,"mat-option",9),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,W,2,2,"mat-option",10),e.qZA()(),e.TgZ(25,"div",7),e._UZ(26,"input",11,12),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",13)(30,"table",14),e.ynx(31,15),e.YNc(32,K,3,3,"th",16),e.YNc(33,te,6,6,"td",17),e.BQk(),e.ynx(34,18),e.YNc(35,oe,3,3,"th",19),e.YNc(36,ne,3,4,"td",17),e.BQk(),e.ynx(37,20),e.YNc(38,ie,3,3,"th",19),e.YNc(39,ce,6,4,"td",17),e.BQk(),e.ynx(40,21),e.YNc(41,ge,3,3,"th",19),e.YNc(42,ue,3,4,"td",17),e.BQk(),e.ynx(43,22),e.YNc(44,pe,3,3,"th",19),e.YNc(45,me,2,1,"td",17),e.BQk(),e.YNc(46,de,1,0,"tr",23),e.YNc(47,he,1,0,"tr",24),e.qZA()(),e.YNc(48,Le,6,3,"ng-container",25),e._UZ(49,"mat-paginator",26),e.qZA()),2&o&&(e.xp6(5),e.Oqu(e.lcZ(6,23,"LOGS")),e.xp6(3),e.Q6J("ngIf",e.lcZ(9,25,i.dataSource.loading$)),e.xp6(4),e.s9C("placeholder",e.lcZ(13,27,"SELECT_LEVEL")),e.Q6J("dir",i.langDir)("value",i.nLogResource.level),e.xp6(3),e.Oqu(e.lcZ(16,29,"NONE")),e.xp6(2),e.Q6J("ngForOf",i.levels),e.xp6(2),e.s9C("placeholder",e.lcZ(20,31,"SELECT_SOURCE")),e.Q6J("dir",i.langDir)("value",i.nLogResource.source),e.xp6(3),e.Oqu(e.lcZ(23,33,"NONE")),e.xp6(2),e.Q6J("ngForOf",i.sources),e.xp6(2),e.s9C("placeholder",e.lcZ(28,35,"SEARCH_BY_MESSAGE")),e.xp6(4),e.Q6J("dir",i.langDir)("dataSource",i.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("ngIf",0===i.dataSource.count),e.xp6(1),e.Q6J("dir",i.langDir)("length",i.nLogResource.totalCount)("pageSize",i.nLogResource.pageSize)("pageSizeOptions",e.DdM(37,fe)))},dependencies:[l.sg,l.O5,l.RF,l.n9,l.ED,F.Lv,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,S.Ou,p.YE,p.nU,d.NW,A.gD,G.ey,g.rH,l.Ov,l.uU,P.W,x.X$],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]}),t})(),data:{claimType:"LOGS_VIEW_ERROR_LOGS"},canActivate:[L.a]},{path:":id",component:Q,canActivate:[L.a],resolve:{log:Z}}];let Ze=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(ve),g.Bz]}),t})();var Ce=a(7531),Ne=a(7108);let xe=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[Z],imports:[l.ez,Ne.m,r.p0,S.Cq,p.JX,d.TU,Ce.c,A.LD,Ze]}),t})()}}]);