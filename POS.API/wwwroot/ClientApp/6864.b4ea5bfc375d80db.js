"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[6864],{5519:(S,l,o)=>{o.d(l,{r:()=>d});class d{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0}}},6864:(S,l,o)=>{o.r(l),o.d(l,{LoginAuditModule:()=>ot});var d=o(9808),a=o(2075),m=o(773),r=o(4847),c=o(6087),v=o(7531),p=o(2554),T=o(319),C=o(5519);class Z extends C.r{constructor(){super(...arguments),this.id="",this.userName=""}}var x=o(6787),b=o(3753),h=o(2868),y=o(13),R=o(5778),N=o(1490),g=o(591),D=o(1086),A=o(7221),U=o(537);class j{constructor(n){this.loginAuditService=n,this.loginAuditSubject=new g.X([]),this.responseHeaderSubject=new g.X(null),this.loadingSubject=new g.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get count(){return this._count}connect(){return this.loginAuditSubject.asObservable()}disconnect(){this.loginAuditSubject.complete(),this.loadingSubject.complete()}loadLoginAudits(n){this.loadingSubject.next(!0),this.loginAuditService.getLoginAudits(n).pipe((0,A.K)(()=>(0,D.of)([])),(0,U.x)(()=>this.loadingSubject.next(!1))).subscribe(e=>{const s=JSON.parse(e.headers.get("X-Pagination"));this.responseHeaderSubject.next(s);const u=[...e.body];this._count=u.length,this.loginAuditSubject.next(u)})}}var t=o(5e3),f=o(520),I=o(8032);let O=(()=>{class i{constructor(e,s){this.httpClient=e,this.commonHttpErrorService=s}getLoginAudits(e){const u=(new f.LE).set("Fields",e.fields).set("OrderBy",e.orderBy).set("PageSize",e.pageSize.toString()).set("Skip",e.skip.toString()).set("SearchQuery",e.searchQuery).set("id",e.id.toString()).set("userName",e.userName.toString());return this.httpClient.get("LoginAudit",{params:u,observe:"response"}).pipe((0,A.K)(this.commonHttpErrorService.handleError))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(f.eN),t.LFG(I.U))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Y=o(6107),z=o(226),L=o(1062);const E=["input"];function Q(i,n){1&i&&(t.TgZ(0,"div",24),t._UZ(1,"mat-spinner"),t.qZA())}function B(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE_TIME")," "))}function H(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==e?null:e.loginTime,"dd/MM/yyyy hh:mm:ss")," ")}}function M(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"EMAIL")," "))}function $(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.userName," ")}}function G(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"STATUS")," "))}function w(i,n){if(1&i&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(null==e?null:e.status)}}function J(i,n){if(1&i&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(null==e?null:e.status)}}function P(i,n){if(1&i&&(t.TgZ(0,"td",26),t.YNc(1,w,2,1,"span",27),t.YNc(2,J,2,1,"span",28),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf","Success"==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf","Error"==(null==e?null:e.status))}}function F(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"IP_ADDRESS")," "))}function X(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.remoteIP," ")}}function W(i,n){1&i&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"LATITUDE")," "))}function K(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.latitude," ")}}function V(i,n){1&i&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"LONGITUDE")," "))}function k(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.longitude," ")}}function q(i,n){1&i&&t._UZ(0,"tr",32)}function _(i,n){1&i&&t._UZ(0,"tr",33)}function tt(i,n){1&i&&(t.ynx(0),t.TgZ(1,"div",34)(2,"div",35)(3,"label",36),t._uU(4),t.ALo(5,"translate"),t.qZA()()(),t.BQk()),2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"NO_DATA_FOUND")))}const it=function(){return[10,20,30]},et=[{path:"",component:(()=>{class i extends N.H{constructor(e,s){super(s),this.loginAuditService=e,this.translationService=s,this.loginAudits=[],this.displayedColumns=["loginTime","userName","remoteIP","status","latitude","longitude"],this.isLoadingResults=!0,this.getLangDir(),this.loginAuditResource=new Z,this.loginAuditResource.pageSize=10,this.loginAuditResource.orderBy="loginTime desc"}ngOnInit(){this.dataSource=new j(this.loginAuditService),this.dataSource.loadLoginAudits(this.loginAuditResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,x.T)(this.sort.sortChange,this.paginator.page).pipe((0,h.b)(e=>{this.loginAuditResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.loginAuditResource.pageSize=this.paginator.pageSize,this.loginAuditResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe(),this.sub$.sink=(0,b.R)(this.input.nativeElement,"keyup").pipe((0,y.b)(1e3),(0,R.x)(),(0,h.b)(()=>{this.paginator.pageIndex=0,this.loginAuditResource.userName=this.input.nativeElement.value,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.loginAuditResource.pageSize=e.pageSize,this.loginAuditResource.skip=e.skip,this.loginAuditResource.totalCount=e.totalCount)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(O),t.Y36(Y.D))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login-audit-list"]],viewQuery:function(e,s){if(1&e&&(t.Gf(c.NW,5),t.Gf(r.YE,5),t.Gf(E,5)),2&e){let u;t.iGM(u=t.CRH())&&(s.paginator=u.first),t.iGM(u=t.CRH())&&(s.sort=u.first),t.iGM(u=t.CRH())&&(s.input=u.first)}},features:[t.qOj],decls:38,vars:20,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"content-header"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-responsive"],[1,"mb-3","col-sm-5"],[1,"form-control",3,"placeholder"],["input",""],["mat-table","","matSort","","matSortActive","loginTime","matSortDirection","desc",1,"table","table-bordered","table-hover",3,"dir","dataSource"],["matColumnDef","loginTime"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","status"],["matColumnDef","remoteIP"],["matColumnDef","latitude"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","longitude"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[1,"w-100",3,"length","dir","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-warning"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"row"],[1,"col-sm-12","ml-4","mt-3"],[1,"font-weight-bold"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA()()()()(),t.TgZ(7,"div",4),t.YNc(8,Q,2,0,"div",5),t.ALo(9,"async"),t.TgZ(10,"div",6)(11,"div",7),t._UZ(12,"input",8,9),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"table",10),t.ynx(16,11),t.YNc(17,B,3,3,"th",12),t.YNc(18,H,3,4,"td",13),t.BQk(),t.ynx(19,14),t.YNc(20,M,3,3,"th",12),t.YNc(21,$,2,1,"td",13),t.BQk(),t.ynx(22,15),t.YNc(23,G,3,3,"th",12),t.YNc(24,P,3,2,"td",13),t.BQk(),t.ynx(25,16),t.YNc(26,F,3,3,"th",12),t.YNc(27,X,2,1,"td",13),t.BQk(),t.ynx(28,17),t.YNc(29,W,3,3,"th",18),t.YNc(30,K,2,1,"td",13),t.BQk(),t.ynx(31,19),t.YNc(32,V,3,3,"th",18),t.YNc(33,k,2,1,"td",13),t.BQk(),t.YNc(34,q,1,0,"tr",20),t.YNc(35,_,1,0,"tr",21),t.qZA(),t.YNc(36,tt,6,3,"ng-container",22),t._UZ(37,"mat-paginator",23),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,13,"LOGIN_AUDIT_LOGS")),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,15,s.dataSource.loading$)),t.xp6(4),t.s9C("placeholder",t.lcZ(14,17,"SEARCH_BY_USER_NAME")),t.xp6(3),t.Q6J("dir",s.langDir)("dataSource",s.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===s.dataSource.count),t.xp6(1),t.Q6J("length",s.loginAuditResource.totalCount)("dir",s.langDir)("pageSize",s.loginAuditResource.pageSize)("pageSizeOptions",t.DdM(19,it)))},dependencies:[d.O5,z.Lv,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,m.Ou,r.YE,r.nU,c.NW,d.Ov,d.uU,L.X$],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]}),i})(),data:{claimType:"LOGS_VIEW_LOGIN_AUDITS"},canActivate:[T.a]}];let nt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(et),p.Bz]}),i})(),ot=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,a.p0,m.Cq,r.JX,c.TU,v.c,nt,L.aw]}),i})()}}]);