"use strict";(self.webpackChunkposadminportal=self.webpackChunkposadminportal||[]).push([[3625],{796:(C,g,r)=>{r.d(g,{f:()=>h});var d=r(5519);class h extends d.r{constructor(){super(...arguments),this.name="",this.unitId="",this.barcode="",this.categoryId="",this.brandId="",this.id=""}}},3625:(C,g,r)=>{r.r(g),r.d(g,{InventoryModule:()=>Ae});var d=r(9808),h=r(2554),y=r(319),m=r(1777),v=r(6087),a=r(4847),l=r(7345),u=r(8929),_=r(6787),R=r(13),L=r(5778),U=r(2868),x=r(1490),p=r(3075),I=r(2349),Q=r(796),H=r(7545),t=r(5e3),Z=r(6435),F=r(8381),j=r(2290),T=r(6107),J=r(4603),$=r(5528),A=r(226),B=r(7322),E=r(4107),k=r(508),O=r(4834),D=r(1062);function z(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",n.data.productName,"")}}function V(e,o){if(1&e&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.name," ")}}function q(e,o){1&e&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SELECT_PRODUCT")," "))}function G(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,q,3,3,"div",35),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==n.inventoryForm.get("productId").errors?null:n.inventoryForm.get("productId").errors.required)}}function K(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"label",17),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",23)(6,"mat-select",32),t.NdJ("selectionChange",function(s){t.CHM(n);const f=t.oxw();return t.KtG(f.onSelectionChange(s.value))}),t.ALo(7,"translate"),t._UZ(8,"input",33),t.ALo(9,"translate"),t._UZ(10,"mat-divider"),t.YNc(11,V,2,2,"mat-option",20),t.qZA()(),t.YNc(12,G,2,1,"div",5),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,6,"PRODUCT")," *"),t.xp6(3),t.s9C("placeholder",t.lcZ(7,8,"SELECT_PRODUCT")),t.Q6J("dir",n.langDir),t.xp6(2),t.s9C("placeholder",t.lcZ(9,10,"SEARCH_OTHER_PRODUCTS")),t.xp6(3),t.Q6J("ngForOf",n.products),t.xp6(1),t.Q6J("ngIf",n.inventoryForm.get("productId").touched&&n.inventoryForm.get("productId").errors)}}function W(e,o){1&e&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"STOCK_IS_REQUIRED"),". "))}function X(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,W,3,3,"div",35),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.inventoryForm.get("stock").touched&&(null==n.inventoryForm.get("stock").errors?null:n.inventoryForm.get("stock").errors.required))}}function tt(e,o){if(1&e&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.name," ")}}function et(e,o){1&e&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"UNIT_IS_REQUIRED")," "))}function nt(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,et,3,3,"div",35),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",null==n.inventoryForm.get("unitId").errors?null:n.inventoryForm.get("unitId").errors.required)}}function ot(e,o){1&e&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"UNIT_PER_PRICE_IS_REQUIRED"),". "))}function it(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ot,3,3,"div",35),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.inventoryForm.get("pricePerUnit").touched&&(null==n.inventoryForm.get("pricePerUnit").errors?null:n.inventoryForm.get("pricePerUnit").errors.required))}}function rt(e,o){if(1&e&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.name," ")}}let at=(()=>{class e extends x.H{constructor(n,i,s,f,b,P,De,Ne,Se){super(P),this.dialogRef=n,this.data=i,this.inventoryService=s,this.warehouseService=f,this.toastrService=b,this.translationService=P,this.unitConversationService=De,this.fb=Ne,this.productService=Se,this.products=[],this.warehouses=[],this.unitConversationlist=[],this.unitConversationForproduct=[],this.getLangDir(),this.productResource=new Q.f}ngOnInit(){this.getProducts(),this.getWarehouse(),this.getUnitConversation(),this.createForm(),this.productNameChangeValue(),this.data.productId&&(this.inventoryForm.get("filerProduct").setValue(this.data.productName),this.inventoryForm.get("productId").setValue(this.data.productId),this.inventoryForm.get("unitId").setValue(this.data.unitId))}createForm(){this.inventoryForm=this.fb.group({id:[""],stock:["",[p.kI.required,p.kI.min(1)]],filerProduct:[],productName:[""],productId:["",[p.kI.required]],warehouseId:[""],unitId:["",[p.kI.required]],pricePerUnit:["",[p.kI.required]]})}getProducts(){this.productResource.name="",this.productService.getProducts(this.productResource).subscribe(n=>{n&&n.headers&&(this.products=[...n.body])})}getWarehouse(){this.warehouseService.getAll().subscribe(n=>{this.warehouses=n})}getUnitConversation(){this.unitConversationService.getUnitConversations().subscribe(n=>{this.unitConversationlist=n})}onSelectionChange(n){const i=this.products.find(s=>s.id===n);this.unitConversationForproduct=this.unitConversationlist.filter(s=>s.id==i.unitId||s.parentId==i.unitId)}productNameChangeValue(){this.sub$.sink=this.inventoryForm.get("filerProduct").valueChanges.pipe((0,R.b)(500),(0,L.x)(),(0,H.w)(n=>(this.productResource.name=n,this.productService.getProducts(this.productResource)))).subscribe(n=>{n&&n.headers&&(this.products=[...n.body],this.data.id&&(this.inventoryForm.get("productId").setValue(this.data.productId),this.unitConversationForproduct=this.unitConversationlist.filter(i=>i.id==this.data.unitId||i.parentId==this.data.unitId),this.inventoryForm.get("unitId").setValue(this.data.unitId)))})}onCancel(){this.dialogRef.close()}addInventory(){if(!this.inventoryForm.valid)return void this.inventoryForm.markAllAsTouched();const n=this.inventoryForm.value,i=this.products.find(s=>s.id===n.productId);n.unitId=i.unitId,this.inventoryService.addInventory(n).subscribe(()=>{this.toastrService.success(this.translationService.getValue("INVENTORY_SAVED_SUCCESSFULLY")),this.dialogRef.close(!0)})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(I.so),t.Y36(I.WI),t.Y36(Z.V),t.Y36(F.l),t.Y36(j._W),t.Y36(T.D),t.Y36(J.j),t.Y36(p.QS),t.Y36($.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-inventory"]],features:[t.qOj],decls:64,vars:43,consts:[[1,"modal-content1"],[1,"modal-header"],[1,"d-flex","w-100","align-items-center","justify-content-between"],[1,"col-md-10","col"],[1,"modal-title"],[4,"ngIf"],[1,"col-sm-auto","col-auto","ml-auto"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"fas","fa-times"],[3,"formGroup"],[1,"modal-body"],[1,"row"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"form-group"],["for","stock",1,"text-danger"],["formControlName","stock","type","number","id","stock",1,"form-control"],[1,"text-danger"],["formControlName","unitId",1,"form-control",3,"dir","placeholder"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","pricePerUnit",1,"text-danger"],["formControlName","pricePerUnit","type","number","id","pricePerUnit",1,"form-control"],[1,"input-group"],["formControlName","warehouseId",1,"form-control",3,"dir","placeholder"],[1,"modal-footer"],[1,"form-row","w-100"],[1,"col-md-auto","col-auto"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-times-circle"],["formControlName","productId",1,"form-control",3,"dir","placeholder","selectionChange"],["formControlName","filerProduct","focused","'true'","type","text","autocomplete","off",1,"form-control","w-100",3,"placeholder"],[3,"value"],["class","text-danger",4,"ngIf"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5),t.ALo(6,"translate"),t.YNc(7,z,2,1,"span",5),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return i.onCancel()}),t._UZ(10,"i",8),t.qZA()()()(),t.TgZ(11,"form",9)(12,"div",10)(13,"div",11),t.YNc(14,K,13,12,"div",12),t.TgZ(15,"div",13)(16,"div",14)(17,"label",15),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",16),t.YNc(21,X,2,1,"div",5),t.qZA()(),t.TgZ(22,"div",13)(23,"div",14)(24,"mat-label",17),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"mat-select",18),t.ALo(28,"translate"),t.TgZ(29,"mat-option",19),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.YNc(32,tt,2,2,"mat-option",20),t.qZA(),t.YNc(33,nt,2,1,"div",5),t.qZA()(),t.TgZ(34,"div",13)(35,"div",14)(36,"label",21),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",22),t.YNc(40,it,2,1,"div",5),t.qZA()(),t.TgZ(41,"div",13)(42,"div",14)(43,"label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"div",23)(47,"mat-select",24),t.ALo(48,"translate"),t.TgZ(49,"mat-option",19),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.YNc(52,rt,2,2,"mat-option",20),t.qZA()()()()()(),t.TgZ(53,"div",25)(54,"div",26)(55,"div",27)(56,"button",28),t.NdJ("click",function(){return i.addInventory()}),t._UZ(57,"i",29),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"button",30),t.NdJ("click",function(){return i.onCancel()}),t._UZ(61,"i",31),t._uU(62),t.ALo(63,"translate"),t.qZA()()()()()()),2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,21,"MANAGE_INVENTORY_FOR")," "),t.xp6(2),t.Q6J("ngIf",i.data.productName),t.xp6(4),t.Q6J("formGroup",i.inventoryForm),t.xp6(3),t.Q6J("ngIf",!i.data.productId),t.xp6(4),t.hij("",t.lcZ(19,23,"STOCK")," *"),t.xp6(3),t.Q6J("ngIf",i.inventoryForm.get("stock").touched&&i.inventoryForm.get("stock").errors),t.xp6(4),t.hij(" ",t.lcZ(26,25,"BASE_UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(28,27,"SELECT_UNIT")),t.Q6J("dir",i.langDir),t.xp6(3),t.Oqu(t.lcZ(31,29,"NONE")),t.xp6(2),t.Q6J("ngForOf",i.unitConversationForproduct),t.xp6(1),t.Q6J("ngIf",i.inventoryForm.get("unitId").touched&&i.inventoryForm.get("unitId").errors),t.xp6(4),t.hij("",t.lcZ(38,31,"UNIT_PER_PRICE")," *"),t.xp6(3),t.Q6J("ngIf",i.inventoryForm.get("pricePerUnit").touched&&i.inventoryForm.get("pricePerUnit").errors),t.xp6(4),t.hij("",t.lcZ(45,33,"WAREHOUSE")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(48,35,"SELECT_WAREHOUSE")),t.Q6J("dir",i.langDir),t.xp6(3),t.Oqu(t.lcZ(51,37,"NONE")),t.xp6(2),t.Q6J("ngForOf",i.warehouses),t.xp6(6),t.hij(" ",t.lcZ(59,39,"SAVE")," "),t.xp6(4),t.hij(" ",t.lcZ(63,41,"CANCEL")," "))},dependencies:[d.sg,d.O5,p._Y,p.Fj,p.wV,p.JJ,p.JL,p.sg,p.u,A.Lv,B.hX,E.gD,k.ey,O.d,D.X$]}),e})();var st=r(6e3),ct=r(9785),N=r(773),c=r(2075),w=r(5245),Y=r(7423),lt=r(3723),dt=r(1358),S=r(591),ut=r(2654),mt=r(1086),pt=r(7221),vt=r(537);class ht{constructor(o){this.inventoryService=o,this._entities$=new S.X([]),this._responseHeaderSubject$=new S.X(null),this.loadingSubject$=new S.X(!1),this.loading$=this.loadingSubject$.asObservable(),this._count=0,this.responseHeaderSubject$=this._responseHeaderSubject$.asObservable(),this.sub$=new ut.w}get count(){return this._count}connect(){return this._entities$.asObservable()}disconnect(){this._entities$.complete(),this.loadingSubject$.complete(),this.sub$.unsubscribe()}loadData(o){this.loadingSubject$.next(!0),this.sub$=this.inventoryService.getInventoryHistories(o).pipe((0,pt.K)(()=>(0,mt.of)([])),(0,vt.x)(()=>this.loadingSubject$.next(!1))).subscribe(n=>{let i=new dt.E;n&&n.headers.get("X-Pagination")&&(i=JSON.parse(n.headers.get("X-Pagination"))),this._responseHeaderSubject$.next(i);const s=[...n.body];this._count=s.length,this._entities$.next(s)})}}var M=r(8708),ft=r(8017),gt=r(1599);function yt(e,o){1&e&&(t.TgZ(0,"div",22),t._UZ(1,"mat-spinner"),t.qZA())}function _t(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"DATE")," "))}function Ct(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"utcToLocalTime"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.createdDate,"shortDate")," ")}}function It(e,o){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"SOURCE")," "))}const xt=function(e){return["/purchase-order/detail",e]};function Zt(e,o){if(1&e&&(t.TgZ(0,"span")(1,"a",27),t._uU(2),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,xt,n.purchaseOrderId)),t.xp6(1),t.hij("(",n.purchaseOrderNumber,")")}}const Tt=function(e){return["/sales-order/detail",e]};function At(e,o){if(1&e&&(t.TgZ(0,"span")(1,"a",27),t._uU(2),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,Tt,n.salesOrderId)),t.xp6(1),t.hij("(",n.salesOrderNumber,")")}}function Dt(e,o){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"inventorySource"),t.YNc(3,Zt,3,4,"span",21),t.YNc(4,At,3,4,"span",21),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,3,n.inventorySource)," "),t.xp6(2),t.Q6J("ngIf",n.purchaseOrderId),t.xp6(1),t.Q6J("ngIf",n.salesOrderId)}}function Nt(e,o){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"STOCK")," "))}function St(e,o){if(1&e&&(t.TgZ(0,"td",26)(1,"span"),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.hij(" ",n.stock," ")}}function bt(e,o){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"UNIT_PER_PRICE")))}function Rt(e,o){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"customCurrency"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.pricePerUnit)," ")}}const Lt=function(){return[10,20,30]};function Ut(e,o){if(1&e&&(t.TgZ(0,"td",28),t._UZ(1,"mat-paginator",29),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("length",n.inventoryHistoryResource.totalCount)("dir",n.langDir)("pageSize",n.inventoryHistoryResource.pageSize)("pageSizeOptions",t.DdM(4,Lt))}}function Et(e,o){1&e&&t._UZ(0,"tr",30)}function Ot(e,o){if(1&e&&t._UZ(0,"tr",31),2&e){const n=o.$implicit;t.ekj("bg-warning1",2==n.inventorySource||3==n.inventorySource)}}function wt(e,o){1&e&&t._UZ(0,"tr",32)}function Yt(e,o){1&e&&(t.ynx(0),t.TgZ(1,"div",33)(2,"div",34)(3,"label",35),t._uU(4),t.ALo(5,"translate"),t.qZA()()(),t.BQk()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"NO_DATA_FOUND"),""))}let Mt=(()=>{class e extends x.H{constructor(n,i){super(i),this.inventoryService=n,this.translationService=i,this.displayedColumns=["createdDate","inventorySource","stock","pricePerUnit"],this.columnsToDisplay=["footer"],this.getLangDir(),this.inventoryHistoryResource=new lt.a,this.inventoryHistoryResource.pageSize=10,this.inventoryHistoryResource.orderBy="createdDate asc"}ngOnInit(){}ngOnChanges(n){n.inventory&&(this.inventoryHistoryResource.productId=this.inventory.productId,this.dataSource=new ht(this.inventoryService),this.dataSource.loadData(this.inventoryHistoryResource),this.getResourceParameter())}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,_.T)(this.sort.sortChange,this.paginator.page).pipe((0,U.b)(()=>{this.inventoryHistoryResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.inventoryHistoryResource.pageSize=this.paginator.pageSize,this.inventoryHistoryResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.inventoryHistoryResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(n=>{n&&(this.inventoryHistoryResource.pageSize=n.pageSize,this.inventoryHistoryResource.skip=n.skip,this.inventoryHistoryResource.totalCount=n.totalCount)})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.V),t.Y36(T.D))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inventory-history-list"]],viewQuery:function(n,i){if(1&n&&(t.Gf(v.NW,5),t.Gf(a.YE,5)),2&n){let s;t.iGM(s=t.CRH())&&(i.paginator=s.first),t.iGM(s=t.CRH())&&(i.sort=s.first)}},inputs:{inventory:"inventory"},features:[t.qOj,t.TTD],decls:30,vars:14,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto","col"],[1,"content-header"],["class","loading-shade",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],["mat-table","","matSort","","multiTemplateDataRows","","matSortActive","createdDate",3,"dir","dataSource"],["matColumnDef","createdDate"],["class","table-column-200","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-200","mat-cell","",4,"matCellDef"],["matColumnDef","inventorySource"],["class","table-column-150","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-150","mat-cell","",4,"matCellDef"],["matColumnDef","stock"],["matColumnDef","pricePerUnit"],["matColumnDef","footer"],["mat-footer-cell","","colspan","5",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"bg-warning1",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"ngIf"],[1,"loading-shade"],["mat-header-cell","","mat-sort-header","",1,"table-column-200"],["mat-cell","",1,"table-column-200"],["mat-header-cell","","mat-sort-header","",1,"table-column-150"],["mat-cell","",1,"table-column-150"],[3,"routerLink"],["mat-footer-cell","","colspan","5"],[3,"length","dir","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"row"],[1,"col-sm-12","ml-4","mt-3"],[1,"font-weight-bold"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA()()()()(),t.YNc(7,yt,2,0,"div",4),t.ALo(8,"async"),t.TgZ(9,"div",5)(10,"div",6)(11,"table",7),t.ynx(12,8),t.YNc(13,_t,3,3,"th",9),t.YNc(14,Ct,3,4,"td",10),t.BQk(),t.ynx(15,11),t.YNc(16,It,3,3,"th",12),t.YNc(17,Dt,5,5,"td",13),t.BQk(),t.ynx(18,14),t.YNc(19,Nt,3,3,"th",12),t.YNc(20,St,3,1,"td",13),t.BQk(),t.ynx(21,15),t.YNc(22,bt,3,3,"th",12),t.YNc(23,Rt,3,3,"td",13),t.BQk(),t.ynx(24,16),t.YNc(25,Ut,2,5,"td",17),t.BQk(),t.YNc(26,Et,1,0,"tr",18),t.YNc(27,Ot,1,2,"tr",19),t.YNc(28,wt,1,0,"tr",20),t.qZA(),t.YNc(29,Yt,6,3,"ng-container",21),t.qZA()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,10,"INVENTORY_HISTORY")),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,12,i.dataSource.loading$)),t.xp6(4),t.Q6J("dir",i.langDir)("dataSource",i.dataSource),t.xp6(15),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",i.columnsToDisplay)("matFooterRowDefSticky",!0),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.count))},dependencies:[d.O5,h.yS,A.Lv,v.NW,a.YE,a.nU,N.Ou,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.mD,c.Ke,c.ge,c.ev,c.yh,c.XQ,c.Gk,c.Q2,d.Ov,M.R,ft.M,D.X$,gt.a]}),e})();function Pt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",38)(1,"button",39),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.addInvenotry({}))}),t._UZ(2,"i",40),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"ADD_INVENTORY")," "))}function Qt(e,o){1&e&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t.qZA())}function Ht(e,o){1&e&&t._UZ(0,"th",42)}function Ft(e,o){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"chevron_right"),t.qZA())}function jt(e,o){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_more"),t.qZA())}function Jt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(n);const s=t.oxw().$implicit,f=t.oxw();return t.KtG(f.addInvenotry(s))}),t._UZ(1,"i",40),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"ADD_INVENTORY")," "))}function $t(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",43)(1,"button",44),t.NdJ("click",function(){const f=t.CHM(n).$implicit,b=t.oxw();return t.KtG(b.toggleRow(f))}),t.YNc(2,Ft,2,0,"mat-icon",45),t.YNc(3,jt,2,0,"mat-icon",45),t.qZA(),t.YNc(4,Jt,4,3,"button",46),t.qZA()}if(2&e){const n=o.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",n!=i.expandedElement),t.xp6(1),t.Q6J("ngIf",n==i.expandedElement),t.xp6(1),t.Q6J("hasClaim","INVE_MANAGE_INVENTORY")}}function Bt(e,o){1&e&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"PRODUCT_NAME")))}function kt(e,o){if(1&e&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.productName," ")}}function zt(e,o){1&e&&(t.TgZ(0,"th",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"STOCK")," "))}function Vt(e,o){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.AsE(" ",n.stock," -",n.unitName," ")}}function qt(e,o){1&e&&(t.TgZ(0,"th",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AVERAGE_PURCHASE_PRICE")," "))}function Gt(e,o){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"customCurrency"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.averagePurchasePrice)," ")}}function Kt(e,o){1&e&&(t.TgZ(0,"th",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AVERAGE_SALES_PRICE"),""))}function Wt(e,o){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"customCurrency"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.averageSalesPrice)," ")}}function Xt(e,o){1&e&&t._UZ(0,"th",52)}function te(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",53)(1,"input",54),t.NdJ("ngModelChange",function(s){t.CHM(n);const f=t.oxw();return t.KtG(f.ProductNameFilter=s)}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.ProductNameFilter)}}function ee(e,o){1&e&&t._UZ(0,"th",52)}function ne(e,o){1&e&&t._UZ(0,"th",52)}function oe(e,o){1&e&&t._UZ(0,"th",52)}const ie=function(){return[10,20,30]};function re(e,o){if(1&e&&(t.TgZ(0,"td",55),t._UZ(1,"mat-paginator",56),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("length",n.inventoryResource.totalCount)("pageSize",n.inventoryResource.pageSize)("dir",n.langDir)("pageSizeOptions",t.DdM(4,ie))}}function ae(e,o){1&e&&(t.TgZ(0,"td",55)(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"NO_DATA_FOUND"),""))}function se(e,o){1&e&&(t.ynx(0,57),t.YNc(1,ae,4,3,"td",28),t.BQk())}function ce(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",59)(2,"div",60),t._UZ(3,"app-inventory-history-list",61),t.qZA()(),t.BQk()),2&e){const n=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("@detailExpand",n==i.expandedElement?"expanded":"collapsed"),t.xp6(2),t.Q6J("inventory",n)}}function le(e,o){if(1&e&&(t.TgZ(0,"td",58),t.YNc(1,ce,4,2,"ng-container",45),t.qZA()),2&e){const n=o.$implicit,i=t.oxw();t.uIk("colspan",i.displayedColumns.length),t.xp6(1),t.Q6J("ngIf",n==i.expandedElement)}}function de(e,o){1&e&&(t.TgZ(0,"tr")(1,"td",62)(2,"span",63)(3,"b"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"NO_DATA_FOUND"),""))}function ue(e,o){1&e&&t._UZ(0,"tr",64)}function me(e,o){1&e&&t._UZ(0,"tr",65)}function pe(e,o){1&e&&t._UZ(0,"tr",66)}function ve(e,o){1&e&&t._UZ(0,"tr",67)}function he(e,o){1&e&&t._UZ(0,"tr",68)}const fe=function(){return["action-search","productName-search","stock-search","averagePurchasePrice-search","averageSalesPrice-search"]},ge=function(){return["expandedDetail"]},ye=[{path:"",component:(()=>{class e extends x.H{constructor(n,i,s,f){super(s),this.inventoryService=n,this.cd=i,this.translationService=s,this.dialog=f,this.displayedColumns=["action","productName","stock","averagePurchasePrice","averageSalesPrice"],this.columnsToDisplay=["footer"],this.expandedElement=null,this.filterObservable$=new u.xQ,this.getLangDir(),this.inventoryResource=new l.P,this.inventoryResource.pageSize=50,this.inventoryResource.orderBy="productName asc"}get ProductNameFilter(){return this._productNameFilter}set ProductNameFilter(n){this._productNameFilter=n,this.filterObservable$.next(`productName##${n}`)}ngOnInit(){this.dataSource=new st.u(this.inventoryService),this.dataSource.loadData(this.inventoryResource),this.getResourceParameter(),this.sub$.sink=this.filterObservable$.pipe((0,R.b)(1e3),(0,L.x)()).subscribe(n=>{this.inventoryResource.skip=0,this.paginator.pageIndex=0;const i=n.split("##");"productName"===i[0]&&(this.inventoryResource.productName=escape(i[1])),this.dataSource.loadData(this.inventoryResource)})}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,_.T)(this.sort.sortChange,this.paginator.page).pipe((0,U.b)(()=>{this.inventoryResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.inventoryResource.pageSize=this.paginator.pageSize,this.inventoryResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.inventoryResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(n=>{n&&(this.inventoryResource.pageSize=n.pageSize,this.inventoryResource.skip=n.skip,this.inventoryResource.totalCount=n.totalCount)})}toggleRow(n){this.expandedElement=this.expandedElement===n?null:n,this.cd.detectChanges()}addInvenotry(n){this.dialog.open(at,{width:"600px",direction:this.langDir,data:Object.assign({},n)}).afterClosed().subscribe(s=>{s&&this.dataSource.loadData(this.inventoryResource)})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.V),t.Y36(t.sBO),t.Y36(T.D),t.Y36(I.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inventory-list"]],viewQuery:function(n,i){if(1&n&&(t.Gf(v.NW,5),t.Gf(a.YE,5)),2&n){let s;t.iGM(s=t.CRH())&&(i.paginator=s.first),t.iGM(s=t.CRH())&&(i.sort=s.first)}},features:[t.qOj],decls:49,vars:20,consts:[[1,"page-header-main"],[1,"row","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto","col"],[1,"content-header"],["class","col-md-auto col-sm-auto col-auto",4,"hasClaim"],["class","loading-shade",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","grid-height"],["mat-table","","matSort","","multiTemplateDataRows","","matSortActive","productName",3,"dir","dataSource"],["matColumnDef","action"],["class","table-column-100","mat-header-cell","",4,"matHeaderCellDef"],["class","table-column-100","mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["class","table-column-300","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-300","mat-cell","",4,"matCellDef"],["matColumnDef","stock"],["class","table-column-150","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-150","mat-cell","",4,"matCellDef"],["matColumnDef","averagePurchasePrice"],["matColumnDef","averageSalesPrice"],["matColumnDef","action-search"],["class","pr-5","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","productName-search"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","stock-search"],["matColumnDef","averagePurchasePrice-search"],["matColumnDef","averageSalesPrice-search"],["matColumnDef","footer"],["mat-footer-cell","","colspan","5",4,"matFooterCellDef"],["matColumnDef","no-records",4,"ngIf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-row","","class","example-second-header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[1,"col-md-auto","col-sm-auto","col-auto"],[1,"btn","blue-btn","btn-sm","m-right-10",3,"click"],[1,"fas","fa-plus"],[1,"loading-shade"],["mat-header-cell","",1,"table-column-100"],["mat-cell","",1,"table-column-100"],["mat-icon-button","",3,"click"],[4,"ngIf"],["class","btn blue-btn btn-sm ml-4",3,"click",4,"hasClaim"],[1,"btn","blue-btn","btn-sm","ml-4",3,"click"],["mat-header-cell","","mat-sort-header","",1,"table-column-300"],["mat-cell","",1,"table-column-300"],["mat-header-cell","","mat-sort-header","",1,"table-column-150"],["mat-cell","",1,"table-column-150"],["mat-header-cell","",1,"pr-5"],["mat-header-cell",""],["type","text",1,"form-control","w-90",3,"ngModel","ngModelChange"],["mat-footer-cell","","colspan","5"],[3,"length","pageSize","dir","pageSizeOptions"],["matColumnDef","no-records"],["mat-cell",""],[1,"example-element-detail"],[1,"inner-table","mat-elevation-z8"],[3,"inventory"],["colspan","9"],[1,"p-4","mt-4"],["mat-header-row",""],["mat-row",""],["mat-header-row","",1,"example-second-header-row"],["mat-footer-row",""],["mat-row","",1,"example-detail-row"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.YNc(7,Pt,5,3,"div",4),t.qZA()(),t.YNc(8,Qt,2,0,"div",5),t.ALo(9,"async"),t.TgZ(10,"div",6)(11,"div",7)(12,"table",8),t.ynx(13,9),t.YNc(14,Ht,1,0,"th",10),t.YNc(15,$t,5,3,"td",11),t.BQk(),t.ynx(16,12),t.YNc(17,Bt,3,3,"th",13),t.YNc(18,kt,2,1,"td",14),t.BQk(),t.ynx(19,15),t.YNc(20,zt,3,3,"th",16),t.YNc(21,Vt,2,2,"td",17),t.BQk(),t.ynx(22,18),t.YNc(23,qt,3,3,"th",16),t.YNc(24,Gt,3,3,"td",17),t.BQk(),t.ynx(25,19),t.YNc(26,Kt,3,3,"th",16),t.YNc(27,Wt,3,3,"td",17),t.BQk(),t.ynx(28,20),t.YNc(29,Xt,1,0,"th",21),t.BQk(),t.ynx(30,22),t.YNc(31,te,2,1,"th",23),t.BQk(),t.ynx(32,24),t.YNc(33,ee,1,0,"th",21),t.BQk(),t.ynx(34,25),t.YNc(35,ne,1,0,"th",21),t.BQk(),t.ynx(36,26),t.YNc(37,oe,1,0,"th",21),t.BQk(),t.ynx(38,27),t.YNc(39,re,2,5,"td",28),t.BQk(),t.YNc(40,se,2,0,"ng-container",29),t.ynx(41,30),t.YNc(42,le,2,2,"td",31),t.BQk(),t.YNc(43,de,6,3,"tr",32),t.YNc(44,ue,1,0,"tr",33),t.YNc(45,me,1,0,"tr",34),t.YNc(46,pe,1,0,"tr",35),t.YNc(47,ve,1,0,"tr",36),t.YNc(48,he,1,0,"tr",37),t.qZA()()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,14,"INVENTORIES")),t.xp6(2),t.Q6J("hasClaim","INVE_MANAGE_INVENTORY"),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,16,i.dataSource.loading$)),t.xp6(4),t.Q6J("dir",i.langDir)("dataSource",i.dataSource),t.xp6(28),t.Q6J("ngIf",0===i.dataSource.count),t.xp6(4),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matHeaderRowDef",t.DdM(18,fe))("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matFooterRowDef",i.columnsToDisplay)("matFooterRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(19,ge)))},dependencies:[d.O5,p.Fj,p.JJ,p.On,ct.d,A.Lv,v.NW,a.YE,a.nU,N.Ou,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.mD,c.Ke,c.ge,c.ev,c.yh,c.XQ,c.Gk,c.Q2,c.Ee,w.Hw,Y.lW,Mt,d.Ov,M.R,D.X$],styles:["tr.example-detail-row[_ngcontent-%COMP%]{height:0!important}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.inner-table[_ngcontent-%COMP%]{margin:1em;padding:1em;width:100%!important}"],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})(),data:{claimType:"INVE_VIEW_INVENTORIES"},canActivate:[y.a]}];let _e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(ye),h.Bz]}),e})();var Ce=r(7108),Ie=r(1079),xe=r(9224),Ze=r(7531),Te=r(2181);let Ae=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,_e,p.u5,p.UX,Ce.m,E.LD,Ie.Bb,xe.QW,v.TU,a.JX,N.Cq,c.p0,Ze.c,Te.Tx,I.Is,w.Ps,Y.ot,O.t]}),e})()},5528:(C,g,r)=>{r.d(g,{M:()=>y});var d=r(520),h=r(5e3);let y=(()=>{class m{constructor(a){this.http=a}getProducts(a){const u=(new d.LE).set("fields",a.fields).set("orderBy",a.orderBy).set("pageSize",a.pageSize.toString()).set("skip",a.skip.toString()).set("searchQuery",a.searchQuery).set("name",a.name).set("id",a.id).set("categoryId",a.categoryId?a.categoryId:"").set("unitId",a.unitId?a.unitId:"").set("barcode",a.barcode?a.barcode:"").set("brandId",a.brandId);return this.http.get("product",{params:u,observe:"response"})}getProudct(a){return this.http.get(`product/${a}`)}addProudct(a){return this.http.post("product",a)}updateProudct(a,l){return this.http.put(`product/${a}`,l)}deleteProudct(a){return this.http.delete(`product/${a}`)}}return m.\u0275fac=function(a){return new(a||m)(h.LFG(d.eN))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8708:(C,g,r)=>{r.d(g,{R:()=>m});var d=r(5e3),h=r(9808),y=r(130);let m=(()=>{class v{constructor(l,u){this.currencyPipe=l,this.securityService=u}transform(l,u){return this.currencyPipe.transform(l=null!=l?l:0,this.securityService.currencyCode)}}return v.\u0275fac=function(l){return new(l||v)(d.Y36(h.H9,16),d.Y36(y.I,16))},v.\u0275pipe=d.Yjl({name:"customCurrency",type:v,pure:!0}),v})()},4834:(C,g,r)=>{r.d(g,{d:()=>m,t:()=>v});var d=r(5e3),h=r(3191),y=r(508);let m=(()=>{class a{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(u){this._vertical=(0,h.Ig)(u)}get inset(){return this._inset}set inset(u){this._inset=(0,h.Ig)(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275cmp=d.Xpm({type:a,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(u,_){2&u&&(d.uIk("aria-orientation",_.vertical?"vertical":"horizontal"),d.ekj("mat-divider-vertical",_.vertical)("mat-divider-horizontal",!_.vertical)("mat-divider-inset",_.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(u,_){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),a})(),v=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=d.oAB({type:a}),a.\u0275inj=d.cJS({imports:[y.BQ,y.BQ]}),a})()}}]);